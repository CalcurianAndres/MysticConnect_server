import{a as V}from"./chunk-DO5URY5W.js";import{a as oe}from"./chunk-SAV3IXQI.js";import{b as Q,c as z,d as G,e as J,g as K,h as X,i as Y,j as Z}from"./chunk-2ENZ3PA2.js";import"./chunk-HUYOMWR4.js";import{a as $}from"./chunk-6FTYGNKF.js";import{$a as D,Fa as A,Ia as w,Na as S,Ub as k,Wa as _,X as x,Xa as T,Ya as E,Za as U,_a as L,_b as F,ab as t,bb as i,cb as g,da as p,db as C,e as ie,ea as u,eb as m,fb as c,ib as r,ja as O,jb as M,kb as q,lb as R,ob as f,pb as h,qb as P,sb as H,tb as b,za as s}from"./chunk-Q6JVZMQ3.js";var le=l=>({"is-active":l});function de(l,a){if(l&1){let o=C();t(0,"button",26),m("click",function(){p(o);let d=c();return u(d.nuevaPromotora())}),g(1,"span",27),t(2,"span"),r(3,"Registrar"),i()()}}function se(l,a){if(l&1){let o=C();t(0,"button",26),m("click",function(){p(o);let d=c();return u(d.EditarPromotora())}),g(1,"span",27),t(2,"span"),r(3,"Editar"),i()()}}var W=class l{UserService=x(V);fija="";active;Edicion;data;onCloseModal=new O;verificar(a){a.target.value==="Fija"?this.data.fija=!0:this.data.fija=!1}cerrar(){this.fija="",this.onCloseModal.emit()}nuevaPromotora(){this.UserService.NuevaPromotora(this.data),this.cerrar()}EditarPromotora(){this.UserService.EditarPromotora(this.data),this.cerrar()}static \u0275fac=function(o){return new(o||l)};static \u0275cmp=w({type:l,selectors:[["app-modal-promotoras"]],inputs:{active:"active",Edicion:"Edicion",data:"data"},outputs:{onCloseModal:"onCloseModal"},decls:68,vars:13,consts:[[1,"modal",3,"ngClass"],[1,"modal-background"],[1,"modal-card"],[1,"modal-card-head"],[1,"modal-card-title"],["aria-label","close",1,"delete",3,"click"],[1,"modal-card-body"],[1,"field","is-grouped"],[1,"control"],["for","",1,"label"],["type","text",1,"input",3,"ngModelChange","ngModel"],[1,"select"],[3,"ngModelChange","ngModel"],["value","Mystic"],["value","Qerametik"],[1,"control",2,"width","140px"],["type","email",1,"input",3,"ngModelChange","ngModel"],["type","number","name","","id","",1,"input",3,"ngModelChange","ngModel"],["value","Admin"],["value","Promotora"],["value","coordinadora"],["value","Ejecutiva"],[3,"change","ngModelChange","ngModel"],["value","Fija"],["value","Destajo"],[1,"button","is-primary"],[1,"button","is-primary",3,"click"],[1,"icon"]],template:function(o,e){o&1&&(t(0,"div",0),g(1,"div",1),t(2,"div",2)(3,"header",3)(4,"p",4),r(5,"Promotoras"),i(),t(6,"button",5),m("click",function(){return e.cerrar()}),i()(),t(7,"div",6)(8,"div",7)(9,"div",8)(10,"label",9),r(11,"Nombre:"),i(),t(12,"input",10),P("ngModelChange",function(n){return h(e.data.nombre,n)||(e.data.nombre=n),n}),i()(),t(13,"div",8)(14,"label",9),r(15,"Apellido:"),i(),t(16,"input",10),P("ngModelChange",function(n){return h(e.data.apellido,n)||(e.data.apellido=n),n}),i()(),t(17,"div",8)(18,"label",9),r(19,"Marca:"),i(),t(20,"div",11)(21,"select",12),P("ngModelChange",function(n){return h(e.data.marca,n)||(e.data.marca=n),n}),t(22,"option",13),r(23,"Mystic"),i(),t(24,"option",14),r(25,"Qerametik"),i()()()()(),t(26,"div",7)(27,"div",15)(28,"label",9),r(29,"Tel\xE9fono:"),i(),t(30,"input",10),P("ngModelChange",function(n){return h(e.data.telefono,n)||(e.data.telefono=n),n}),i()(),t(31,"div",8)(32,"label",9),r(33,"Correo:"),i(),t(34,"input",16),P("ngModelChange",function(n){return h(e.data.correo,n)||(e.data.correo=n),n}),i()(),t(35,"div",15)(36,"label",9),r(37,"Regi\xF3n"),i(),t(38,"input",10),P("ngModelChange",function(n){return h(e.data.region,n)||(e.data.region=n),n}),i()()(),t(39,"div",7)(40,"div",8)(41,"label",9),r(42,"Sueldo (USD):"),i(),t(43,"input",17),P("ngModelChange",function(n){return h(e.data.sueldo,n)||(e.data.sueldo=n),n}),i()(),t(44,"div",8)(45,"label",9),r(46,"Role:"),i(),t(47,"div",11)(48,"select",12),P("ngModelChange",function(n){return h(e.data.role,n)||(e.data.role=n),n}),t(49,"option",18),r(50,"Administrador"),i(),t(51,"option",19),r(52,"Promotora"),i(),t(53,"option",20),r(54,"Coordinadora"),i(),t(55,"option",21),r(56,"Ejecutiva"),i()()()(),t(57,"div",8)(58,"label",9),r(59,"tipo:"),i(),t(60,"div",11)(61,"select",22),m("change",function(n){return e.verificar(n)}),P("ngModelChange",function(n){return h(e.fija,n)||(e.fija=n),n}),t(62,"option",23),r(63,"Fija"),i(),t(64,"option",24),r(65,"Destajo"),i()()()()(),S(66,de,4,0,"button",25)(67,se,4,0,"button",25),i()()()),o&2&&(_("ngClass",b(11,le,e.active)),s(12),f("ngModel",e.data.nombre),s(4),f("ngModel",e.data.apellido),s(5),f("ngModel",e.data.marca),s(9),f("ngModel",e.data.telefono),s(4),f("ngModel",e.data.correo),s(4),f("ngModel",e.data.region),s(5),f("ngModel",e.data.sueldo),s(5),f("ngModel",e.data.role),s(13),f("ngModel",e.fija),s(5),E(e.data.nombre&&e.data.apellido&&e.data.telefono&&e.data.correo&&e.data.region&&e.data.sueldo&&e.data.role&&!e.Edicion?66:e.data.nombre&&e.data.apellido&&e.data.telefono&&e.data.correo&&e.data.region&&e.data.sueldo&&e.data.role&&e.Edicion?67:-1))},dependencies:[F,k,Z,X,Y,Q,J,K,z,G],encapsulation:2})};var y=ie(oe());var me=()=>[],v=l=>({inhabilitado:l});function ce(l,a){l&1&&(t(0,"thead")(1,"tr")(2,"th"),r(3,"Fija"),i(),t(4,"th"),r(5,"Nombre"),i(),t(6,"th"),r(7,"Correo"),i(),t(8,"th"),r(9,"Tel\xE9fono"),i(),t(10,"th"),r(11,"Regi\xF3n"),i(),t(12,"th"),r(13,"Sueldo (USD)"),i(),t(14,"th"),r(15,"Role"),i(),t(16,"th"),r(17,"Acci\xF3n"),i()()())}function pe(l,a){l&1&&g(0,"app-loadings")}function ue(l,a){l&1&&g(0,"i",12)}function _e(l,a){l&1&&g(0,"i",13)}function ge(l,a){if(l&1){let o=C();t(0,"i",16),m("click",function(){p(o);let d=c().$implicit,n=c(2);return u(n.inhabilitarPromotora(d,"inhabilitada"))}),i(),r(1,"\xA0 ")}}function Ce(l,a){if(l&1){let o=C();t(0,"i",17),m("click",function(){p(o);let d=c().$implicit,n=c(2);return u(n.inhabilitarPromotora(d,"habilitada"))}),i(),r(1,"\xA0 ")}}function fe(l,a){if(l&1){let o=C();t(0,"i",18),m("click",function(){p(o);let d=c().$implicit,n=c(2);return u(n.activarCalendario(d))}),i(),r(1,"\xA0 ")}}function he(l,a){if(l&1){let o=C();t(0,"i",19),m("click",function(){p(o);let d=c().$implicit,n=c(2);return u(n.activarCalendario(d))}),i(),r(1,"\xA0 ")}}function Pe(l,a){if(l&1){let o=C();t(0,"tr")(1,"td",11),S(2,ue,1,0,"i",12)(3,_e,1,0,"i",13),i(),t(4,"td",11),r(5),i(),t(6,"td",11),r(7),i(),t(8,"td",11),r(9),i(),t(10,"td",11),r(11),i(),t(12,"td",11),r(13),i(),t(14,"td",11),r(15),i(),t(16,"td")(17,"i",14),m("click",function(){let d=p(o).$implicit,n=c(2);return u(n.Editar(d))}),i(),r(18,"\xA0 "),t(19,"i",15),m("click",function(){let d=p(o).$implicit,n=c(2);return u(n.ElimiarPromotora(d))}),i(),r(20,"\xA0 "),S(21,ge,2,0)(22,Ce,2,0)(23,fe,2,0)(24,he,2,0),i()()}if(l&2){let o=a.$implicit;s(),_("ngClass",b(17,v,o.estado==="inhabilitada")),s(),E(o.fija?3:2),s(2),_("ngClass",b(19,v,o.estado==="inhabilitada")),s(),R("",o.nombre," ",o.apellido," "),s(),_("ngClass",b(21,v,o.estado==="inhabilitada")),s(),M(o.correo),s(),_("ngClass",b(23,v,o.estado==="inhabilitada")),s(),M(o.telefono),s(),_("ngClass",b(25,v,o.estado==="inhabilitada")),s(),M(o.region),s(),_("ngClass",b(27,v,o.estado==="inhabilitada")),s(),q("",o.sueldo," $"),s(),_("ngClass",b(29,v,o.estado==="inhabilitada")),s(),M(o.role),s(6),E(o.estado!="inhabilitada"?21:22),s(2),E(o.restringido?23:24)}}function be(l,a){l&1&&(t(0,"div",10),r(1," No se encontraron promotoras. "),i())}function Ee(l,a){if(l&1&&L(0,Pe,25,31,"tr",null,U,!1,be,2,0,"div",10),l&2){let o=c();D(o.paginatedPromotoras)}}function Se(l,a){if(l&1){let o=C();t(0,"li")(1,"a",20),m("click",function(){let d=p(o).$index,n=c();return u(n.goToPage(d+1))}),r(2),i()()}if(l&2){let o=a.$index,e=c();s(),T("is-current",e.currentPage===o+1),s(),q(" ",o+1," ")}}var ee=class l{UserService=x(V);Modal=A(!1);Edicion=A(!1);data={nombre:"",marca:"",apellido:"",correo:"",telefono:"",region:"",sueldo:"",restringido:!0,fija:!0,role:"Promotora"};constructor(){}currentPage=1;itemsPerPage=100;get totalItems(){return this.UserService.users().length}get totalPages(){return Math.ceil(this.totalItems/this.itemsPerPage)}get paginatedPromotoras(){let a=(this.currentPage-1)*this.itemsPerPage,o=a+this.itemsPerPage;return this.UserService.users().slice(a,o)}goToPage(a){a<1||a>this.totalPages||(this.currentPage=a)}ManejoModal(){this.Modal.update(a=>!a)}cerrarEdicion(){this.Edicion.update(a=>!1),this.data={nombre:"",marca:"",apellido:"",correo:"",telefono:"",region:"",sueldo:"",restringido:!0,fija:!0,role:"Promotora"}}Editar(a){this.data=a,this.Edicion.update(o=>!o),this.ManejoModal()}ElimiarPromotora(a){y.default.fire({title:`\xBFEliminar esta promotora: ${a.nombre} ${a.apellido}?`,text:"\xBFEstas segura que quieres eliminar a esta promotora? aun podras ver reportes anteriores pero no podra generar nuevos",icon:"question",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Eliminar!"}).then(o=>{o.isConfirmed&&(this.UserService.eliminarPromotora(a._id),y.default.fire({title:"Eliminada",text:"La promotora fue eliminada de la lista",icon:"success",showConfirmButton:!1,timer:5e3,toast:!0,timerProgressBar:!0,position:"top-end"}))})}inhabilitarPromotora(a,o){let e,d,n,j,B,I,N;o==="habilitada"?(e=`\xBFhabilitar esta promotora: ${a.nombre} ${a.apellido}?`,d="\xBFEstas segura que quieres habilitar a esta promotora?",n="Habilitada",j="La promotora ahora esta habilitada",B="Habilitar",I="#3085d6",N="#d33"):(e=`\xBFInhabilitar esta promotora: ${a.nombre} ${a.apellido}?`,d="\xBFEstas segura que quieres inhabilitar a esta promotora? aun podras ver reportes anteriores pero no podra generar nuevos",n="Inhabilitada",j="La promotora fue Inhabilitada de la lista",B="Inhabilitar",N="#3085d6",I="#d33"),y.default.fire({title:e,text:d,icon:"question",showCancelButton:!0,confirmButtonColor:I,cancelButtonColor:N,confirmButtonText:B}).then(te=>{te.isConfirmed&&(a.estado=o,this.UserService.EditarPromotora(a),y.default.fire({title:n,text:j,icon:"success",showConfirmButton:!1,timer:5e3,toast:!0,timerProgressBar:!0,position:"top-end"}))})}activarCalendario(a){a.restringido=!a.restringido,this.UserService.EditarPromotora(a)}static \u0275fac=function(o){return new(o||l)};static \u0275cmp=w({type:l,selectors:[["app-promotoras"]],decls:22,vars:12,consts:[[3,"onCloseModal","active","Edicion","data"],[1,"button","is-primary",3,"click"],[1,"icon"],[1,"fas","fa-plus-square"],[1,"table","is-striped","is-fullwidth"],["role","navigation","aria-label","pagination",1,"pagination"],[1,"pagination-previous",3,"click"],[1,"pagination-list"],[1,"pagination-next",3,"click"],[1,"pagination-info"],[1,"notification","is-primary","is-light"],[3,"ngClass"],[1,"fas","fa-ban",2,"color","rgb(228, 129, 129)"],[1,"fas","fa-check",2,"color","rgb(129, 228, 129)"],[1,"fas","fa-user-edit",2,"color","rgb(129, 228, 129)","cursor","pointer",3,"click"],[1,"fas","fa-user-minus",2,"color","rgb(228, 129, 129)","cursor","pointer",3,"click"],[1,"fas","fa-user-slash",2,"color","rgb(228, 177, 129)","cursor","pointer",3,"click"],[1,"fas","fa-user-check",2,"color","rgb(129, 228, 129)","cursor","pointer",3,"click"],[1,"fas","fa-calendar-check",2,"color","rgb(228, 129, 129)",3,"click"],[1,"fas","fa-calendar-check",2,"color","rgb(129, 228, 129)",3,"click"],[1,"pagination-link",3,"click"]],template:function(o,e){o&1&&(t(0,"app-modal-promotoras",0),m("onCloseModal",function(){return e.ManejoModal(),e.cerrarEdicion()}),i(),t(1,"button",1),m("click",function(){return e.ManejoModal()}),t(2,"span",2),g(3,"i",3),i(),t(4,"span"),r(5,"Nuevo"),i()(),g(6,"hr"),t(7,"table",4),S(8,ce,18,0,"thead"),t(9,"tbody"),S(10,pe,1,0,"app-loadings")(11,Ee,3,1),i()(),t(12,"nav",5)(13,"a",6),m("click",function(){return e.goToPage(e.currentPage-1)}),r(14," Anterior "),i(),t(15,"ul",7),L(16,Se,3,3,"li",null,U),i(),t(18,"a",8),m("click",function(){return e.goToPage(e.currentPage+1)}),r(19," Siguiente "),i()(),t(20,"div",9),r(21),i()),o&2&&(_("active",e.Modal())("Edicion",e.Edicion())("data",e.data),s(8),E(e.paginatedPromotoras.length>0?8:-1),s(2),E(e.UserService.loading()?10:11),s(3),T("is-disabled",e.currentPage===1),s(3),D(H(11,me).constructor(e.totalPages)),s(2),T("is-disabled",e.currentPage===e.totalPages),s(3),R(" P\xE1gina ",e.currentPage," de ",e.totalPages,`
`))},dependencies:[$,W,F,k],styles:[".inhabilitado[_ngcontent-%COMP%]{color:#c24040}"]})};export{ee as PromotorasComponent};
