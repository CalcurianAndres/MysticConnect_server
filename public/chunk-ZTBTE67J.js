import{f as c}from"./chunk-2LV7HNH4.js";import{a as S}from"./chunk-TZTC4YCF.js";import{B as a,O as n,R as l,X as o,p as i,t as s}from"./chunk-BH4UYFV3.js";var u=class t{http=o(S);router=o(c);ruta="https://mysticconnect-server.onrender.com/api";usuario;isBrowser=()=>typeof window<"u"&&window.document;get token(){return this.isBrowser()&&localStorage.getItem("TOKEN_SESSION")||""}get headers(){return{Authorization:this.token}}get Correo_session(){return this.isBrowser()&&localStorage.getItem("SESSION_EMAIL")||""}get Nombre_session(){return this.isBrowser()&&localStorage.getItem("SESSION_USER_NAME")||""}constructor(){}Login(r,e){let g=`${this.ruta}/login`;return e&&this.isBrowser()&&localStorage.setItem("SESSION_EMAIL",r.correo),this.http.post(g,r)}validarToken(){return this.http.get(`${this.ruta}/login/renew`,{headers:this.headers}).pipe(n(r=>{this.usuario=r.usuario,this.isBrowser()&&(localStorage.setItem("TOKEN_SESSION",r.token),localStorage.getItem("SESSION_EMAIL")&&localStorage.setItem("SESSION_USER_NAME",this.usuario.nombre))}),s(r=>!0),a(r=>i(!1)))}logout(){this.isBrowser()&&(localStorage.removeItem("TOKEN_SESSION"),this.router.navigateByUrl("login"))}borrar_Session(){this.isBrowser()&&(localStorage.removeItem("SESSION_EMAIL"),localStorage.removeItem("SESSION_USER_NAME"))}CambiarPassword(r){return this.http.post(`${this.ruta}/login/change-password`,r)}static \u0275fac=function(e){return new(e||t)};static \u0275prov=l({token:t,factory:t.\u0275fac,providedIn:"root"})};export{u as a};
