import{a as oe}from"./chunk-N6MNTSAI.js";import{a as V}from"./chunk-TACFUCLO.js";import{a as H}from"./chunk-LY455BIY.js";import{a as z,b as G,c as J,d as K,f as Q,g as X,h as Y,i as Z}from"./chunk-AEYFKSCU.js";import"./chunk-SJQBYHCF.js";import{$a as q,Fa as U,Ia as y,Na as S,Sb as k,Wa as _,Wb as F,X as w,Xa as T,Ya as P,Za as L,_a as j,ab as i,bb as o,cb as g,da as p,db as C,e as ie,ea as u,eb as c,fb as m,hb as l,ib as M,ja as O,jb as D,kb as R,nb as h,ob as b,pb as E,rb as $,sb as f,za as d}from"./chunk-K6DX3A3E.js";var le=r=>({"is-active":r});function de(r,n){if(r&1){let t=C();i(0,"button",19),c("click",function(){p(t);let s=m();return u(s.nuevaPromotora())}),g(1,"span",20),i(2,"span"),l(3,"Registrar"),o()()}}function se(r,n){if(r&1){let t=C();i(0,"button",19),c("click",function(){p(t);let s=m();return u(s.EditarPromotora())}),g(1,"span",20),i(2,"span"),l(3,"Editar"),o()()}}var B=class r{UserService=w(V);active;Edicion;data;onCloseModal=new O;cerrar(){this.onCloseModal.emit()}nuevaPromotora(){this.UserService.NuevaPromotora(this.data),this.cerrar()}EditarPromotora(){this.UserService.EditarPromotora(this.data),this.cerrar()}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=y({type:r,selectors:[["app-modal-promotoras"]],inputs:{active:"active",Edicion:"Edicion",data:"data"},outputs:{onCloseModal:"onCloseModal"},decls:46,vars:11,consts:[[1,"modal",3,"ngClass"],[1,"modal-background"],[1,"modal-card"],[1,"modal-card-head"],[1,"modal-card-title"],["aria-label","close",1,"delete",3,"click"],[1,"modal-card-body"],[1,"field","is-grouped"],[1,"control"],["for","",1,"label"],["type","text",1,"input",3,"ngModelChange","ngModel"],[1,"control",2,"width","140px"],["type","email",1,"input",3,"ngModelChange","ngModel"],["type","number","name","","id","",1,"input",3,"ngModelChange","ngModel"],[1,"select"],[3,"ngModelChange","ngModel"],["value","Admin"],["value","Promotora"],[1,"button","is-primary"],[1,"button","is-primary",3,"click"],[1,"icon"]],template:function(t,e){t&1&&(i(0,"div",0),g(1,"div",1),i(2,"div",2)(3,"header",3)(4,"p",4),l(5,"Promotoras"),o(),i(6,"button",5),c("click",function(){return e.cerrar()}),o()(),i(7,"div",6)(8,"div",7)(9,"div",8)(10,"label",9),l(11,"Nombre:"),o(),i(12,"input",10),E("ngModelChange",function(a){return b(e.data.nombre,a)||(e.data.nombre=a),a}),o()(),i(13,"div",8)(14,"label",9),l(15,"Apellido:"),o(),i(16,"input",10),E("ngModelChange",function(a){return b(e.data.apellido,a)||(e.data.apellido=a),a}),o()()(),i(17,"div",7)(18,"div",11)(19,"label",9),l(20,"Tel\xE9fono:"),o(),i(21,"input",10),E("ngModelChange",function(a){return b(e.data.telefono,a)||(e.data.telefono=a),a}),o()(),i(22,"div",8)(23,"label",9),l(24,"Correo:"),o(),i(25,"input",12),E("ngModelChange",function(a){return b(e.data.correo,a)||(e.data.correo=a),a}),o()(),i(26,"div",11)(27,"label",9),l(28,"Regi\xF3n"),o(),i(29,"input",10),E("ngModelChange",function(a){return b(e.data.region,a)||(e.data.region=a),a}),o()()(),i(30,"div",7)(31,"div",8)(32,"label",9),l(33,"Sueldo (USD):"),o(),i(34,"input",13),E("ngModelChange",function(a){return b(e.data.sueldo,a)||(e.data.sueldo=a),a}),o()(),i(35,"div",8)(36,"label",9),l(37,"Role:"),o(),i(38,"div",14)(39,"select",15),E("ngModelChange",function(a){return b(e.data.role,a)||(e.data.role=a),a}),i(40,"option",16),l(41,"Administrador"),o(),i(42,"option",17),l(43,"Promotora"),o()()()()(),S(44,de,4,0,"button",18)(45,se,4,0,"button",18),o()()()),t&2&&(_("ngClass",f(9,le,e.active)),d(12),h("ngModel",e.data.nombre),d(4),h("ngModel",e.data.apellido),d(5),h("ngModel",e.data.telefono),d(4),h("ngModel",e.data.correo),d(4),h("ngModel",e.data.region),d(5),h("ngModel",e.data.sueldo),d(5),h("ngModel",e.data.role),d(5),P(e.data.nombre&&e.data.apellido&&e.data.telefono&&e.data.correo&&e.data.region&&e.data.sueldo&&e.data.role&&!e.Edicion?44:e.data.nombre&&e.data.apellido&&e.data.telefono&&e.data.correo&&e.data.region&&e.data.sueldo&&e.data.role&&e.Edicion?45:-1))},dependencies:[F,k,Z,X,Y,z,K,Q,G,J],encapsulation:2})};var x=ie(oe());var me=()=>[],v=r=>({inhabilitado:r});function ce(r,n){r&1&&(i(0,"thead")(1,"tr")(2,"th"),l(3,"Fija"),o(),i(4,"th"),l(5,"Nombre"),o(),i(6,"th"),l(7,"Correo"),o(),i(8,"th"),l(9,"Tel\xE9fono"),o(),i(10,"th"),l(11,"Regi\xF3n"),o(),i(12,"th"),l(13,"Sueldo (USD)"),o(),i(14,"th"),l(15,"Role"),o(),i(16,"th"),l(17,"Acci\xF3n"),o()()())}function pe(r,n){r&1&&g(0,"app-loadings")}function ue(r,n){r&1&&g(0,"i",12)}function _e(r,n){r&1&&g(0,"i",13)}function ge(r,n){if(r&1){let t=C();i(0,"i",16),c("click",function(){p(t);let s=m().$implicit,a=m(2);return u(a.inhabilitarPromotora(s,"inhabilitada"))}),o(),l(1,"\xA0 ")}}function Ce(r,n){if(r&1){let t=C();i(0,"i",17),c("click",function(){p(t);let s=m().$implicit,a=m(2);return u(a.inhabilitarPromotora(s,"habilitada"))}),o(),l(1,"\xA0 ")}}function fe(r,n){if(r&1){let t=C();i(0,"i",18),c("click",function(){p(t);let s=m().$implicit,a=m(2);return u(a.activarCalendario(s))}),o(),l(1,"\xA0 ")}}function Pe(r,n){if(r&1){let t=C();i(0,"i",19),c("click",function(){p(t);let s=m().$implicit,a=m(2);return u(a.activarCalendario(s))}),o(),l(1,"\xA0 ")}}function he(r,n){if(r&1){let t=C();i(0,"tr")(1,"td",11),S(2,ue,1,0,"i",12)(3,_e,1,0,"i",13),o(),i(4,"td",11),l(5),o(),i(6,"td",11),l(7),o(),i(8,"td",11),l(9),o(),i(10,"td",11),l(11),o(),i(12,"td",11),l(13),o(),i(14,"td",11),l(15),o(),i(16,"td")(17,"i",14),c("click",function(){let s=p(t).$implicit,a=m(2);return u(a.Editar(s))}),o(),l(18,"\xA0 "),i(19,"i",15),c("click",function(){let s=p(t).$implicit,a=m(2);return u(a.ElimiarPromotora(s))}),o(),l(20,"\xA0 "),S(21,ge,2,0)(22,Ce,2,0)(23,fe,2,0)(24,Pe,2,0),o()()}if(r&2){let t=n.$implicit;d(),_("ngClass",f(17,v,t.estado==="inhabilitada")),d(),P(t.fija?3:2),d(2),_("ngClass",f(19,v,t.estado==="inhabilitada")),d(),R("",t.nombre," ",t.apellido," "),d(),_("ngClass",f(21,v,t.estado==="inhabilitada")),d(),M(t.correo),d(),_("ngClass",f(23,v,t.estado==="inhabilitada")),d(),M(t.telefono),d(),_("ngClass",f(25,v,t.estado==="inhabilitada")),d(),M(t.region),d(),_("ngClass",f(27,v,t.estado==="inhabilitada")),d(),D("",t.sueldo," $"),d(),_("ngClass",f(29,v,t.estado==="inhabilitada")),d(),M(t.role),d(6),P(t.estado!="inhabilitada"?21:22),d(2),P(t.restringido?23:24)}}function be(r,n){r&1&&(i(0,"div",10),l(1," No se encontraron promotoras. "),o())}function Ee(r,n){if(r&1&&j(0,he,25,31,"tr",null,L,!1,be,2,0,"div",10),r&2){let t=m();q(t.paginatedPromotoras)}}function Se(r,n){if(r&1){let t=C();i(0,"li")(1,"a",20),c("click",function(){let s=p(t).$index,a=m();return u(a.goToPage(s+1))}),l(2),o()()}if(r&2){let t=n.$index,e=m();d(),T("is-current",e.currentPage===t+1),d(),D(" ",t+1," ")}}var ee=class r{UserService=w(V);Modal=U(!1);Edicion=U(!1);data={nombre:"",apellido:"",correo:"",telefono:"",region:"",sueldo:"",restringido:!0,fija:!0,role:"Promotora"};constructor(){}currentPage=1;itemsPerPage=10;get totalItems(){return this.UserService.users().length}get totalPages(){return Math.ceil(this.totalItems/this.itemsPerPage)}get paginatedPromotoras(){let n=(this.currentPage-1)*this.itemsPerPage,t=n+this.itemsPerPage;return this.UserService.users().slice(n,t)}goToPage(n){n<1||n>this.totalPages||(this.currentPage=n)}ManejoModal(){this.Modal.update(n=>!n)}cerrarEdicion(){this.Edicion.update(n=>!1),this.data={nombre:"",apellido:"",correo:"",telefono:"",region:"",sueldo:"",restringido:!0,fija:!0,role:"Promotora"}}Editar(n){this.data=n,this.Edicion.update(t=>!t),this.ManejoModal()}ElimiarPromotora(n){x.default.fire({title:`\xBFEliminar esta promotora: ${n.nombre} ${n.apellido}?`,text:"\xBFEstas segura que quieres eliminar a esta promotora? aun podras ver reportes anteriores pero no podra generar nuevos",icon:"question",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Eliminar!"}).then(t=>{t.isConfirmed&&(this.UserService.eliminarPromotora(n._id),x.default.fire({title:"Eliminada",text:"La promotora fue eliminada de la lista",icon:"success",showConfirmButton:!1,timer:5e3,toast:!0,timerProgressBar:!0,position:"top-end"}))})}inhabilitarPromotora(n,t){let e,s,a,I,W,N,A;t==="habilitada"?(e=`\xBFhabilitar esta promotora: ${n.nombre} ${n.apellido}?`,s="\xBFEstas segura que quieres habilitar a esta promotora?",a="Habilitada",I="La promotora ahora esta habilitada",W="Habilitar",N="#3085d6",A="#d33"):(e=`\xBFInhabilitar esta promotora: ${n.nombre} ${n.apellido}?`,s="\xBFEstas segura que quieres inhabilitar a esta promotora? aun podras ver reportes anteriores pero no podra generar nuevos",a="Inhabilitada",I="La promotora fue Inhabilitada de la lista",W="Inhabilitar",A="#3085d6",N="#d33"),x.default.fire({title:e,text:s,icon:"question",showCancelButton:!0,confirmButtonColor:N,cancelButtonColor:A,confirmButtonText:W}).then(te=>{te.isConfirmed&&(n.estado=t,this.UserService.EditarPromotora(n),x.default.fire({title:a,text:I,icon:"success",showConfirmButton:!1,timer:5e3,toast:!0,timerProgressBar:!0,position:"top-end"}))})}activarCalendario(n){n.restringido=!n.restringido,this.UserService.EditarPromotora(n)}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=y({type:r,selectors:[["app-promotoras"]],decls:22,vars:12,consts:[[3,"onCloseModal","active","Edicion","data"],[1,"button","is-primary",3,"click"],[1,"icon"],[1,"fas","fa-plus-square"],[1,"table","is-striped","is-fullwidth"],["role","navigation","aria-label","pagination",1,"pagination"],[1,"pagination-previous",3,"click"],[1,"pagination-list"],[1,"pagination-next",3,"click"],[1,"pagination-info"],[1,"notification","is-primary","is-light"],[3,"ngClass"],[1,"fas","fa-ban",2,"color","rgb(228, 129, 129)"],[1,"fas","fa-check",2,"color","rgb(129, 228, 129)"],[1,"fas","fa-user-edit",2,"color","rgb(129, 228, 129)","cursor","pointer",3,"click"],[1,"fas","fa-user-minus",2,"color","rgb(228, 129, 129)","cursor","pointer",3,"click"],[1,"fas","fa-user-slash",2,"color","rgb(228, 177, 129)","cursor","pointer",3,"click"],[1,"fas","fa-user-check",2,"color","rgb(129, 228, 129)","cursor","pointer",3,"click"],[1,"fas","fa-calendar-check",2,"color","rgb(228, 129, 129)",3,"click"],[1,"fas","fa-calendar-check",2,"color","rgb(129, 228, 129)",3,"click"],[1,"pagination-link",3,"click"]],template:function(t,e){t&1&&(i(0,"app-modal-promotoras",0),c("onCloseModal",function(){return e.ManejoModal(),e.cerrarEdicion()}),o(),i(1,"button",1),c("click",function(){return e.ManejoModal()}),i(2,"span",2),g(3,"i",3),o(),i(4,"span"),l(5,"Nuevo"),o()(),g(6,"hr"),i(7,"table",4),S(8,ce,18,0,"thead"),i(9,"tbody"),S(10,pe,1,0,"app-loadings")(11,Ee,3,1),o()(),i(12,"nav",5)(13,"a",6),c("click",function(){return e.goToPage(e.currentPage-1)}),l(14," Anterior "),o(),i(15,"ul",7),j(16,Se,3,3,"li",null,L),o(),i(18,"a",8),c("click",function(){return e.goToPage(e.currentPage+1)}),l(19," Siguiente "),o()(),i(20,"div",9),l(21),o()),t&2&&(_("active",e.Modal())("Edicion",e.Edicion())("data",e.data),d(8),P(e.paginatedPromotoras.length>0?8:-1),d(2),P(e.UserService.loading()?10:11),d(3),T("is-disabled",e.currentPage===1),d(3),q($(11,me).constructor(e.totalPages)),d(2),T("is-disabled",e.currentPage===e.totalPages),d(3),R(" P\xE1gina ",e.currentPage," de ",e.totalPages,`
`))},dependencies:[H,B,F,k],styles:[".inhabilitado[_ngcontent-%COMP%]{color:#c24040}"]})};export{ee as PromotorasComponent};
