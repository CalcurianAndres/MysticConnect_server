import{i as N}from"./chunk-SJTE5LNY.js";import{a as Y}from"./chunk-IPRXS3FE.js";import{a as Z}from"./chunk-JCSZA7Y5.js";import{a as O,b as A,c as q,d as G,e as J,f as j,g as z,h as H,i as U,j as te}from"./chunk-LFLLRPWB.js";import{a as K}from"./chunk-AN4RX2J2.js";import"./chunk-2T3NZPXG.js";import{$a as M,Fa as b,Ia as W,Na as S,Pb as D,Sb as L,Wa as E,X as x,Ya as h,Za as w,_a as y,ab as r,bb as n,cb as m,da as p,db as f,e as ee,ea as u,eb as v,fb as s,gb as I,hb as c,ib as R,jb as P,kb as B,mb as _,nb as g,ob as C,rb as k,sb as F,za as d}from"./chunk-XBXOYP5X.js";var T=ee(te());var ie=l=>({rotado:l}),ne=(l,o)=>({oculto:l,activo:o});function oe(l,o){if(l&1&&(r(0,"option",18),c(1),n()),l&2){let e=o.$implicit;I("value",e._id),d(),R(e.cliente)}}function re(l,o){if(l&1){let e=f();r(0,"div",6)(1,"div",2)(2,"div",19)(3,"div",14)(4,"input",23),C("ngModelChange",function(t){p(e);let i=s();return g(i.tipo_evento,t)||(i.tipo_evento=t),u(t)}),n(),c(5," Juega y Gana "),n(),r(6,"div",14)(7,"input",24),C("ngModelChange",function(t){p(e);let i=s();return g(i.tipo_evento,t)||(i.tipo_evento=t),u(t)}),n(),c(8," Color y estilo "),n()(),r(9,"div",19)(10,"div",14)(11,"input",25),C("ngModelChange",function(t){p(e);let i=s();return g(i.tipo_evento,t)||(i.tipo_evento=t),u(t)}),n(),c(12," Cabellos con estilo "),n(),r(13,"div",14)(14,"input",26),C("ngModelChange",function(t){p(e);let i=s();return g(i.tipo_evento,t)||(i.tipo_evento=t),u(t)}),n(),c(15," Dale y gana "),n()()()()}if(l&2){let e=s();d(4),_("ngModel",e.tipo_evento),d(3),_("ngModel",e.tipo_evento),d(4),_("ngModel",e.tipo_evento),d(3),_("ngModel",e.tipo_evento)}}function ae(l,o){if(l&1){let e=f();r(0,"button",28),v("click",function(){p(e);let t=s(2);return u(t.NextStep())}),r(1,"span",29),m(2,"i",30),n(),r(3,"span"),c(4,"Continuar"),n()()}}function le(l,o){if(l&1){let e=f();r(0,"button",28),v("click",function(){p(e);let t=s(2);return u(t.NextStep())}),r(1,"span",29),m(2,"i",30),n(),r(3,"span"),c(4,"Continuar"),n()()}}function de(l,o){if(l&1&&S(0,ae,5,0,"button",27)(1,le,5,0,"button",27),l&2){let e=s();h(e.tipo!="Evento"?0:e.tipo_evento?1:-1)}}function ce(l,o){if(l&1){let e=f();r(0,"tr")(1,"td",35)(2,"button",36),v("click",function(){let t=p(e).$implicit,i=s(2);return u(i.agregarProducto(t._id))}),r(3,"span",29),m(4,"i",37),n()()(),r(5,"td"),c(6),n()()}if(l&2){let e=o.$implicit;d(6),R(e.producto)}}function se(l,o){l&1&&(r(0,"thead")(1,"tr"),m(2,"th"),r(3,"th"),c(4,"Producto"),n(),r(5,"th"),c(6,"Vendido"),n()()())}function pe(l,o){if(l&1){let e=f();r(0,"tr")(1,"td",35)(2,"button",38),v("click",function(){let t=p(e).$index,i=s(2);return u(i.eliminarDeProductosSelected(t))}),r(3,"span",29),m(4,"i",39),n()()(),r(5,"td"),c(6),n(),r(7,"td",40)(8,"input",41),C("ngModelChange",function(t){let i=p(e).$implicit;return g(i.cantidad,t)||(i.cantidad=t),u(t)}),n()()()}if(l&2){let e=o.$implicit;d(6),R(e.producto.producto),d(2),_("ngModel",e.cantidad)}}function ue(l,o){l&1&&(r(0,"div",34),c(1," Aun no haz indicado ningun producto para reportar su venta. "),n())}function me(l,o){if(l&1){let e=f();r(0,"div",13)(1,"div",14)(2,"textarea",42),C("ngModelChange",function(t){p(e);let i=s(2);return g(i.obervacion,t)||(i.obervacion=t),u(t)}),n()()()}if(l&2){let e=s(2);d(2),_("ngModel",e.obervacion)}}function _e(l,o){if(l&1){let e=f();r(0,"button",28),v("click",function(){p(e);let t=s(2);return u(t.Reportar())}),r(1,"span",29),m(2,"i",43),n(),r(3,"span"),c(4,"Reportar"),n()()}}function ge(l,o){if(l&1){let e=f();r(0,"div",6)(1,"div",2)(2,"div",13)(3,"div",14)(4,"label",15),c(5,"Buscado de productos"),n(),r(6,"input",31),C("ngModelChange",function(t){p(e);let i=s();return g(i.searchTerm,t)||(i.searchTerm=t),u(t)}),v("input",function(){p(e);let t=s();return u(t.filterProductos())}),n()()(),m(7,"hr"),r(8,"table",32)(9,"thead"),y(10,ce,7,1,"tr",null,w),n()(),r(12,"table",33),S(13,se,7,0,"thead"),r(14,"tbody"),y(15,pe,9,2,"tr",null,w,!1,ue,2,0,"div",34),n()(),S(18,me,3,1,"div",13)(19,_e,5,0,"button",27),n()()}if(l&2){let e=s();d(6),_("ngModel",e.searchTerm),d(4),M(e.filteredProductos),d(3),h(e.ProductosSelected.length>0?13:-1),d(2),M(e.ProductosSelected),d(3),h(e.ProductosSelected.length>0?18:-1),d(),h(e.ProductosSelected.length>0&&e.VerificarReporte()&&e.obervacion?19:-1)}}var V=class l{ClientServices=x(Z);ProductosServices=x(Y);ReportesServices=x(K);loginSevice=x(N);searchTerm="";filteredProductos=[];Informacion=b(!0);isRotated=b(!1);ProductosSelected=[];establecimiento="";tipo="";tipo_evento="";obervacion="";date_log="";CargadaInformacion=b(!1);data={promotora:this.loginSevice.usuario._id,cliente:"",productos:[],tipo:"",observacion:""};constructor(){this.date_log=this.getFormattedDate()}filterProductos(){this.searchTerm.trim()===""?this.filteredProductos=[]:this.filteredProductos=this.ProductosServices.productos().filter(o=>o.producto.toLowerCase().includes(this.searchTerm.toLowerCase()))}getFormattedDate(){let o=new Date,e=String(o.getDate()).padStart(2,"0"),a=String(o.getMonth()+1).padStart(2,"0"),t=o.getFullYear(),i=o.getHours(),Q=String(o.getMinutes()).padStart(2,"0"),X=String(o.getSeconds()).padStart(2,"0"),$=i>=12?"PM":"AM";return i=i%12,i=i||12,`${e}/${a}/${t} ${i}:${Q}:${X} ${$}`}toggleInformacion(){this.Informacion.update(o=>!o),this.isRotated.update(o=>!o)}agregarProducto(o){this.searchTerm="",this.filterProductos();let e=this.ProductosServices.productos().find(t=>t._id===o);if(!e){console.error("Producto no encontrado");return}this.ProductosSelected.some(t=>t.producto?._id===e._id)||this.ProductosSelected.push({producto:e,cantidad:0})}VerificarReporte(){return this.ProductosSelected.every(o=>o.cantidad>0)}eliminarDeProductosSelected(o){this.ProductosSelected.splice(o,1)}Reportar(){T.default.fire({title:"\xBFReportar ventas de hoy?",text:"Recuerda verificar bien las cantidades que declaras y los productos seleccionados",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Reportar!"}).then(o=>{o.isConfirmed&&(T.default.fire({title:"Listo",text:"La informaci\xF3n fue enviada con exito",icon:"success",showConfirmButton:!1,timer:5e3,toast:!0,timerProgressBar:!0,position:"top-end"}),this.data.cliente=this.establecimiento,this.data.tipo=this.tipo,this.data.evento=this.tipo_evento,this.data.productos=this.ProductosSelected.map(e=>({producto:e.producto._id,cantidad:e.cantidad})),this.data.observacion=this.obervacion,this.ReportesServices.NuevoReporte(this.data),this.data={promotora:this.loginSevice.usuario._id,cliente:"",productos:[],tipo:"",observacion:""},this.ProductosSelected=[],this.establecimiento="",this.tipo="",this.tipo_evento="",this.obervacion="",this.CargadaInformacion.update(e=>!1),this.isRotated.update(e=>!1),this.Informacion.update(e=>!0))})}NextStep(){this.CargadaInformacion.update(o=>!0),this.isRotated.update(o=>!0),this.Informacion.update(o=>!1)}static \u0275fac=function(e){return new(e||l)};static \u0275cmp=W({type:l,selectors:[["app-reporte"]],decls:41,vars:17,consts:[[1,"formulario_envio_informacion"],[1,"card",2,"background-color","#34495E","color","rgb(212, 212, 212)"],[1,"card-content"],[1,"title",2,"color","rgb(212, 212, 212)"],[2,"font-weight","bold"],[1,"subtitle",2,"color","rgb(212, 212, 212)"],[1,"card"],[1,"card-header"],[1,"card-header-title"],["aria-label","more options",1,"card-header-icon"],[1,"icon",3,"click","ngClass"],["aria-hidden","true",1,"fas","fa-angle-up"],[1,"card-content",3,"ngClass"],[1,"field"],[1,"control"],["for","",1,"label"],[1,"select"],[3,"ngModelChange","ngModel"],[3,"value"],[1,"field","is-grouped"],[1,"radio"],["type","radio","name","evento","value","Impulso",3,"ngModelChange","ngModel"],["type","radio","name","evento","value","Evento",3,"ngModelChange","ngModel"],["type","radio","name","Tipo_evento","value","Juega y Gana",3,"ngModelChange","ngModel"],["type","radio","name","Tipo_evento","value","Color y estilo",3,"ngModelChange","ngModel"],["type","radio","name","Tipo_evento","value","Cabellos con estilo",3,"ngModelChange","ngModel"],["type","radio","name","Tipo_evento","value","Dale y gana",3,"ngModelChange","ngModel"],[1,"button","is-primary"],[1,"button","is-primary",3,"click"],[1,"icon"],[1,"fas","fa-long-arrow-alt-right"],["type","text","placeholder","Buscar producto",1,"input",3,"ngModelChange","input","ngModel"],[1,"table","is-fullwidth","is-hoverable","is-striped"],[1,"table","is-fullwidth","is-striped"],[1,"notification","is-primary","is-light"],[2,"width","15px"],[1,"button","is-success","is-small","is-outlined",2,"border","none",3,"click"],[1,"fas","fa-plus-square"],[1,"button","is-danger","is-small","is-outlined",2,"border","none",3,"click"],[1,"fas","fa-trash-alt"],[2,"width","30px"],["type","number","placeholde","Cantidad vendida",1,"input",3,"ngModelChange","ngModel"],["placeholder","Observaci\xF3n",1,"textarea",3,"ngModelChange","ngModel"],[1,"fas","fa-check"]],template:function(e,a){e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),c(4),n(),m(5,"br"),r(6,"b",4),c(7,"Zona: "),n(),c(8),m(9,"br"),r(10,"span",5),c(11),n()()(),m(12,"hr"),r(13,"div",6)(14,"header",7)(15,"p",8),c(16,"Informaci\xF3n del reporte"),n(),r(17,"button",9)(18,"span",10),v("click",function(){return a.toggleInformacion()}),m(19,"i",11),n()()(),r(20,"div",12)(21,"div",13)(22,"div",14)(23,"label",15),c(24,"Establecimiento"),n(),r(25,"div",16)(26,"select",17),C("ngModelChange",function(i){return g(a.establecimiento,i)||(a.establecimiento=i),i}),y(27,oe,2,2,"option",18,w),n()()()(),r(29,"div",19)(30,"div",14)(31,"label",20)(32,"input",21),C("ngModelChange",function(i){return g(a.tipo,i)||(a.tipo=i),i}),n(),c(33," Impulso "),n()(),r(34,"div",14)(35,"label",20)(36,"input",22),C("ngModelChange",function(i){return g(a.tipo,i)||(a.tipo=i),i}),n(),c(37," Evento "),n()()(),S(38,re,16,4,"div",6)(39,de,2,1),n()(),S(40,ge,20,5,"div",6),n()),e&2&&(d(4),B(" ",a.loginSevice.usuario.nombre," ",a.loginSevice.usuario.apellido," "),d(4),P("",a.loginSevice.usuario.region," "),d(3),P(" ",a.date_log," "),d(7),E("ngClass",k(12,ie,a.isRotated())),d(2),E("ngClass",F(14,ne,!a.Informacion(),a.Informacion())),d(6),_("ngModel",a.establecimiento),d(),M(a.ClientServices.clientes()),d(5),_("ngModel",a.tipo),d(4),_("ngModel",a.tipo),d(2),h(a.tipo==="Evento"?38:-1),d(),h(a.establecimiento&&a.tipo?39:-1),d(),h(a.CargadaInformacion()?40:-1))},dependencies:[L,D,U,z,H,O,G,j,J,A,q],styles:['@charset "UTF-8";.oculto[_ngcontent-%COMP%]{overflow:hidden;max-height:0px;padding:0;margin:0;transition:max-height .9s ease-out,padding .9s ease-out,margin 1s ease-out}.activo[_ngcontent-%COMP%]{overflow:hidden;max-height:1000px;transition:max-height .9s ease-out,padding .3s ease-out,margin .3s ease-out}.icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transition:transform .3s ease}.icon.rotado[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transform:rotate(180deg)}']})};export{V as default};
