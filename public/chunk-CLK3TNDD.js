import{a as p}from"./chunk-TZTC4YCF.js";import{Fa as d,Fb as e,R as u,X as a,a as r,b as s,f as c}from"./chunk-BH4UYFV3.js";var n=class i{http=a(p);#t=d({loading:!0,productos:[]});productos=e(()=>this.#t().productos);loading=e(()=>this.#t().loading);ruta="https://mysticconnect-server.onrender.com/api";constructor(){this.cargarProductos()}cargarProductos(){this.http.get(`${this.ruta}/productos`).subscribe(t=>{let o=t.sort((h,l)=>h.producto.localeCompare(l.producto));this.#t.set({loading:!1,productos:o})})}NuevoProducto=t=>c(this,null,function*(){this.#t.set(s(r({},this.#t()),{loading:!0})),this.http.post(`${this.ruta}/productos`,t).subscribe(o=>{this.#t.set(s(r({},this.#t()),{loading:!1,productos:[...this.#t().productos,o]}))})});EditarPromotora=t=>c(this,null,function*(){this.#t.set(s(r({},this.#t()),{loading:!0})),this.http.put(`${this.ruta}/productos/${t._id}`,t).subscribe(o=>{this.cargarProductos()})});EliminarProducto=t=>c(this,null,function*(){this.#t.set(s(r({},this.#t()),{loading:!0})),this.http.delete(`${this.ruta}/productos/${t}`).subscribe(o=>{this.cargarProductos()})});static \u0275fac=function(o){return new(o||i)};static \u0275prov=u({token:i,factory:i.\u0275fac,providedIn:"root"})};export{n as a};
