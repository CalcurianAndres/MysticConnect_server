import{i as u}from"./chunk-DFGAWLIR.js";import{a as S}from"./chunk-6NTONQXX.js";import{I as n,L as l,R as o,j as i,n as s,v as a}from"./chunk-GSOW5RPX.js";var c=class t{http=o(S);router=o(u);ruta="https://mysticconnectserver-production.up.railway.app/api";usuario;isBrowser=()=>typeof window<"u"&&window.document;get token(){return this.isBrowser()&&localStorage.getItem("TOKEN_SESSION")||""}get headers(){return{Authorization:this.token}}get Correo_session(){return this.isBrowser()&&localStorage.getItem("SESSION_EMAIL")||""}get Nombre_session(){return this.isBrowser()&&localStorage.getItem("SESSION_USER_NAME")||""}constructor(){}Login(r,e){let p=`${this.ruta}/login`;return e&&this.isBrowser()&&localStorage.setItem("SESSION_EMAIL",r.correo),this.http.post(p,r)}validarToken(){return this.http.get(`${this.ruta}/login/renew`,{headers:this.headers}).pipe(n(r=>{this.usuario=r.usuario,this.isBrowser()&&(localStorage.setItem("TOKEN_SESSION",r.token),localStorage.getItem("SESSION_EMAIL")&&localStorage.setItem("SESSION_USER_NAME",this.usuario.nombre))}),s(r=>!0),a(r=>i(!1)))}logout(){this.isBrowser()&&(localStorage.removeItem("TOKEN_SESSION"),this.router.navigateByUrl("login"))}borrar_Session(){this.isBrowser()&&(localStorage.removeItem("SESSION_EMAIL"),localStorage.removeItem("SESSION_USER_NAME"))}CambiarPassword(r){return this.http.post(`${this.ruta}/login/change-password`,r)}static \u0275fac=function(e){return new(e||t)};static \u0275prov=l({token:t,factory:t.\u0275fac,providedIn:"root"})};export{c as a};
