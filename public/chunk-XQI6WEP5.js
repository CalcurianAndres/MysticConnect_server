import{a as ie}from"./chunk-3JJKJOSC.js";import{a as F}from"./chunk-PTCDLZEW.js";import{a as H}from"./chunk-Q5UUACUJ.js";import{a as z,b as G,c as J,d as K,f as Q,g as X,h as Y,i as Z}from"./chunk-X7V57MHS.js";import"./chunk-F2UG3DZ7.js";import{$a as D,Fa as U,Ia as y,Na as S,Pb as T,Sb as V,Wa as _,X as w,Xa as k,Ya as E,Za as L,_a as q,ab as o,bb as i,cb as f,da as p,db as g,e as oe,ea as u,eb as c,fb as m,hb as r,ib as M,ja as O,jb as R,kb as j,mb as P,nb as h,ob as b,qb as $,rb as C,za as d}from"./chunk-TPQHVVYC.js";var le=l=>({"is-active":l});function se(l,a){if(l&1){let t=g();o(0,"button",19),c("click",function(){p(t);let s=m();return u(s.nuevaPromotora())}),f(1,"span",20),o(2,"span"),r(3,"Registrar"),i()()}}function de(l,a){if(l&1){let t=g();o(0,"button",19),c("click",function(){p(t);let s=m();return u(s.EditarPromotora())}),f(1,"span",20),o(2,"span"),r(3,"Editar"),i()()}}var B=class l{UserService=w(F);active;Edicion;data;onCloseModal=new O;cerrar(){this.onCloseModal.emit()}nuevaPromotora(){this.UserService.NuevaPromotora(this.data),this.cerrar()}EditarPromotora(){this.UserService.EditarPromotora(this.data),this.cerrar()}static \u0275fac=function(t){return new(t||l)};static \u0275cmp=y({type:l,selectors:[["app-modal-promotoras"]],inputs:{active:"active",Edicion:"Edicion",data:"data"},outputs:{onCloseModal:"onCloseModal"},decls:46,vars:11,consts:[[1,"modal",3,"ngClass"],[1,"modal-background"],[1,"modal-card"],[1,"modal-card-head"],[1,"modal-card-title"],["aria-label","close",1,"delete",3,"click"],[1,"modal-card-body"],[1,"field","is-grouped"],[1,"control"],["for","",1,"label"],["type","text",1,"input",3,"ngModelChange","ngModel"],[1,"control",2,"width","140px"],["type","email",1,"input",3,"ngModelChange","ngModel"],["type","number","name","","id","",1,"input",3,"ngModelChange","ngModel"],[1,"select"],[3,"ngModelChange","ngModel"],["value","Admin"],["value","Promotora"],[1,"button","is-primary"],[1,"button","is-primary",3,"click"],[1,"icon"]],template:function(t,e){t&1&&(o(0,"div",0),f(1,"div",1),o(2,"div",2)(3,"header",3)(4,"p",4),r(5,"Promotoras"),i(),o(6,"button",5),c("click",function(){return e.cerrar()}),i()(),o(7,"div",6)(8,"div",7)(9,"div",8)(10,"label",9),r(11,"Nombre:"),i(),o(12,"input",10),b("ngModelChange",function(n){return h(e.data.nombre,n)||(e.data.nombre=n),n}),i()(),o(13,"div",8)(14,"label",9),r(15,"Apellido:"),i(),o(16,"input",10),b("ngModelChange",function(n){return h(e.data.apellido,n)||(e.data.apellido=n),n}),i()()(),o(17,"div",7)(18,"div",11)(19,"label",9),r(20,"Tel\xE9fono:"),i(),o(21,"input",10),b("ngModelChange",function(n){return h(e.data.telefono,n)||(e.data.telefono=n),n}),i()(),o(22,"div",8)(23,"label",9),r(24,"Correo:"),i(),o(25,"input",12),b("ngModelChange",function(n){return h(e.data.correo,n)||(e.data.correo=n),n}),i()(),o(26,"div",11)(27,"label",9),r(28,"Regi\xF3n"),i(),o(29,"input",10),b("ngModelChange",function(n){return h(e.data.region,n)||(e.data.region=n),n}),i()()(),o(30,"div",7)(31,"div",8)(32,"label",9),r(33,"Sueldo (USD):"),i(),o(34,"input",13),b("ngModelChange",function(n){return h(e.data.sueldo,n)||(e.data.sueldo=n),n}),i()(),o(35,"div",8)(36,"label",9),r(37,"Role:"),i(),o(38,"div",14)(39,"select",15),b("ngModelChange",function(n){return h(e.data.role,n)||(e.data.role=n),n}),o(40,"option",16),r(41,"Administrador"),i(),o(42,"option",17),r(43,"Promotora"),i()()()()(),S(44,se,4,0,"button",18)(45,de,4,0,"button",18),i()()()),t&2&&(_("ngClass",C(9,le,e.active)),d(12),P("ngModel",e.data.nombre),d(4),P("ngModel",e.data.apellido),d(5),P("ngModel",e.data.telefono),d(4),P("ngModel",e.data.correo),d(4),P("ngModel",e.data.region),d(5),P("ngModel",e.data.sueldo),d(5),P("ngModel",e.data.role),d(5),E(e.data.nombre&&e.data.apellido&&e.data.telefono&&e.data.correo&&e.data.region&&e.data.sueldo&&e.data.role&&!e.Edicion?44:e.data.nombre&&e.data.apellido&&e.data.telefono&&e.data.correo&&e.data.region&&e.data.sueldo&&e.data.role&&e.Edicion?45:-1))},dependencies:[V,T,Z,X,Y,z,K,Q,G,J],encapsulation:2})};var x=oe(ie());var me=()=>[],v=l=>({inhabilitado:l});function ce(l,a){l&1&&(o(0,"thead")(1,"tr")(2,"th"),r(3,"Nombre"),i(),o(4,"th"),r(5,"Correo"),i(),o(6,"th"),r(7,"Tel\xE9fono"),i(),o(8,"th"),r(9,"Regi\xF3n"),i(),o(10,"th"),r(11,"Sueldo (USD)"),i(),o(12,"th"),r(13,"Role"),i(),o(14,"th"),r(15,"Acci\xF3n"),i()()())}function pe(l,a){l&1&&f(0,"app-loadings")}function ue(l,a){if(l&1){let t=g();o(0,"i",14),c("click",function(){p(t);let s=m().$implicit,n=m(2);return u(n.inhabilitarPromotora(s,"inhabilitada"))}),i(),r(1,"\xA0 ")}}function _e(l,a){if(l&1){let t=g();o(0,"i",15),c("click",function(){p(t);let s=m().$implicit,n=m(2);return u(n.inhabilitarPromotora(s,"habilitada"))}),i(),r(1,"\xA0 ")}}function ge(l,a){if(l&1){let t=g();o(0,"i",16),c("click",function(){p(t);let s=m().$implicit,n=m(2);return u(n.activarCalendario(s))}),i(),r(1,"\xA0 ")}}function Ce(l,a){if(l&1){let t=g();o(0,"i",17),c("click",function(){p(t);let s=m().$implicit,n=m(2);return u(n.activarCalendario(s))}),i(),r(1,"\xA0 ")}}function fe(l,a){if(l&1){let t=g();o(0,"tr")(1,"td",11),r(2),i(),o(3,"td",11),r(4),i(),o(5,"td",11),r(6),i(),o(7,"td",11),r(8),i(),o(9,"td",11),r(10),i(),o(11,"td",11),r(12),i(),o(13,"td")(14,"i",12),c("click",function(){let s=p(t).$implicit,n=m(2);return u(n.Editar(s))}),i(),r(15,"\xA0 "),o(16,"i",13),c("click",function(){let s=p(t).$implicit,n=m(2);return u(n.ElimiarPromotora(s))}),i(),r(17,"\xA0 "),S(18,ue,2,0)(19,_e,2,0)(20,ge,2,0)(21,Ce,2,0),i()()}if(l&2){let t=a.$implicit;d(),_("ngClass",C(15,v,t.estado==="inhabilitada")),d(),j("",t.nombre," ",t.apellido,""),d(),_("ngClass",C(17,v,t.estado==="inhabilitada")),d(),M(t.correo),d(),_("ngClass",C(19,v,t.estado==="inhabilitada")),d(),M(t.telefono),d(),_("ngClass",C(21,v,t.estado==="inhabilitada")),d(),M(t.region),d(),_("ngClass",C(23,v,t.estado==="inhabilitada")),d(),R("",t.sueldo," $"),d(),_("ngClass",C(25,v,t.estado==="inhabilitada")),d(),M(t.role),d(6),E(t.estado!="inhabilitada"?18:19),d(2),E(t.restringido?20:21)}}function Pe(l,a){l&1&&(o(0,"div",10),r(1," No se encontraron promotoras. "),i())}function he(l,a){if(l&1&&q(0,fe,22,27,"tr",null,L,!1,Pe,2,0,"div",10),l&2){let t=m();D(t.paginatedPromotoras)}}function be(l,a){if(l&1){let t=g();o(0,"li")(1,"a",18),c("click",function(){let s=p(t).$index,n=m();return u(n.goToPage(s+1))}),r(2),i()()}if(l&2){let t=a.$index,e=m();d(),k("is-current",e.currentPage===t+1),d(),R(" ",t+1," ")}}var ee=class l{UserService=w(F);Modal=U(!1);Edicion=U(!1);data={nombre:"",apellido:"",correo:"",telefono:"",region:"",sueldo:"",restringido:!0,role:"Promotora"};constructor(){}currentPage=1;itemsPerPage=10;get totalItems(){return this.UserService.users().length}get totalPages(){return Math.ceil(this.totalItems/this.itemsPerPage)}get paginatedPromotoras(){let a=(this.currentPage-1)*this.itemsPerPage,t=a+this.itemsPerPage;return this.UserService.users().slice(a,t)}goToPage(a){a<1||a>this.totalPages||(this.currentPage=a)}ManejoModal(){this.Modal.update(a=>!a)}cerrarEdicion(){this.Edicion.update(a=>!1),this.data={nombre:"",apellido:"",correo:"",telefono:"",region:"",sueldo:"",restringido:!0,role:"Promotora"}}Editar(a){this.data=a,this.Edicion.update(t=>!t),this.ManejoModal()}ElimiarPromotora(a){x.default.fire({title:`\xBFEliminar esta promotora: ${a.nombre} ${a.apellido}?`,text:"\xBFEstas segura que quieres eliminar a esta promotora? aun podras ver reportes anteriores pero no podra generar nuevos",icon:"question",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Eliminar!"}).then(t=>{t.isConfirmed&&(this.UserService.eliminarPromotora(a._id),x.default.fire({title:"Eliminada",text:"La promotora fue eliminada de la lista",icon:"success",showConfirmButton:!1,timer:5e3,toast:!0,timerProgressBar:!0,position:"top-end"}))})}inhabilitarPromotora(a,t){let e,s,n,I,W,N,A;t==="habilitada"?(e=`\xBFhabilitar esta promotora: ${a.nombre} ${a.apellido}?`,s="\xBFEstas segura que quieres habilitar a esta promotora?",n="Habilitada",I="La promotora ahora esta habilitada",W="Habilitar",N="#3085d6",A="#d33"):(e=`\xBFInhabilitar esta promotora: ${a.nombre} ${a.apellido}?`,s="\xBFEstas segura que quieres inhabilitar a esta promotora? aun podras ver reportes anteriores pero no podra generar nuevos",n="Inhabilitada",I="La promotora fue Inhabilitada de la lista",W="Inhabilitar",A="#3085d6",N="#d33"),x.default.fire({title:e,text:s,icon:"question",showCancelButton:!0,confirmButtonColor:N,cancelButtonColor:A,confirmButtonText:W}).then(te=>{te.isConfirmed&&(a.estado=t,this.UserService.EditarPromotora(a),x.default.fire({title:n,text:I,icon:"success",showConfirmButton:!1,timer:5e3,toast:!0,timerProgressBar:!0,position:"top-end"}))})}activarCalendario(a){a.restringido=!a.restringido,this.UserService.EditarPromotora(a)}static \u0275fac=function(t){return new(t||l)};static \u0275cmp=y({type:l,selectors:[["app-promotoras"]],decls:22,vars:12,consts:[[3,"onCloseModal","active","Edicion","data"],[1,"button","is-primary",3,"click"],[1,"icon"],[1,"fas","fa-plus-square"],[1,"table","is-striped","is-fullwidth"],["role","navigation","aria-label","pagination",1,"pagination"],[1,"pagination-previous",3,"click"],[1,"pagination-list"],[1,"pagination-next",3,"click"],[1,"pagination-info"],[1,"notification","is-primary","is-light"],[3,"ngClass"],[1,"fas","fa-user-edit",2,"color","rgb(129, 228, 129)","cursor","pointer",3,"click"],[1,"fas","fa-user-minus",2,"color","rgb(228, 129, 129)","cursor","pointer",3,"click"],[1,"fas","fa-user-slash",2,"color","rgb(228, 177, 129)","cursor","pointer",3,"click"],[1,"fas","fa-user-check",2,"color","rgb(129, 228, 129)","cursor","pointer",3,"click"],[1,"fas","fa-calendar-check",2,"color","rgb(228, 129, 129)",3,"click"],[1,"fas","fa-calendar-check",2,"color","rgb(129, 228, 129)",3,"click"],[1,"pagination-link",3,"click"]],template:function(t,e){t&1&&(o(0,"app-modal-promotoras",0),c("onCloseModal",function(){return e.ManejoModal(),e.cerrarEdicion()}),i(),o(1,"button",1),c("click",function(){return e.ManejoModal()}),o(2,"span",2),f(3,"i",3),i(),o(4,"span"),r(5,"Nuevo"),i()(),f(6,"hr"),o(7,"table",4),S(8,ce,16,0,"thead"),o(9,"tbody"),S(10,pe,1,0,"app-loadings")(11,he,3,1),i()(),o(12,"nav",5)(13,"a",6),c("click",function(){return e.goToPage(e.currentPage-1)}),r(14," Anterior "),i(),o(15,"ul",7),q(16,be,3,3,"li",null,L),i(),o(18,"a",8),c("click",function(){return e.goToPage(e.currentPage+1)}),r(19," Siguiente "),i()(),o(20,"div",9),r(21),i()),t&2&&(_("active",e.Modal())("Edicion",e.Edicion())("data",e.data),d(8),E(e.paginatedPromotoras.length>0?8:-1),d(2),E(e.UserService.loading()?10:11),d(3),k("is-disabled",e.currentPage===1),d(3),D($(11,me).constructor(e.totalPages)),d(2),k("is-disabled",e.currentPage===e.totalPages),d(3),j(" P\xE1gina ",e.currentPage," de ",e.totalPages," "))},dependencies:[H,B,V,T],styles:[".inhabilitado[_ngcontent-%COMP%]{color:#c24040}"]})};export{ee as PromotorasComponent};
