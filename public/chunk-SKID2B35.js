import{a as oe}from"./chunk-ET5GL3KV.js";import{a as V}from"./chunk-P7RRBNRB.js";import{a as Z}from"./chunk-EC3ZKULI.js";import{a as H,b as z,c as G,d as J,f as K,g as Q,h as X,i as Y}from"./chunk-FYONC7PZ.js";import"./chunk-HUNMWK37.js";import{$a as q,Fa as U,Ia as y,Na as S,Ub as k,Wa as _,X as w,Xa as T,Ya as P,Za as L,Zb as F,_a as j,ab as t,bb as o,cb as g,da as p,db as C,e as ie,ea as u,eb as c,fb as m,ib as r,ja as O,jb as M,kb as D,lb as R,ob as h,pb as b,qb as E,sb as $,tb as f,za as d}from"./chunk-5XISTBJQ.js";var le=l=>({"is-active":l});function de(l,n){if(l&1){let i=C();t(0,"button",20),c("click",function(){p(i);let s=m();return u(s.nuevaPromotora())}),g(1,"span",21),t(2,"span"),r(3,"Registrar"),o()()}}function se(l,n){if(l&1){let i=C();t(0,"button",20),c("click",function(){p(i);let s=m();return u(s.EditarPromotora())}),g(1,"span",21),t(2,"span"),r(3,"Editar"),o()()}}var B=class l{UserService=w(V);active;Edicion;data;onCloseModal=new O;cerrar(){this.onCloseModal.emit()}nuevaPromotora(){this.UserService.NuevaPromotora(this.data),this.cerrar()}EditarPromotora(){this.UserService.EditarPromotora(this.data),this.cerrar()}static \u0275fac=function(i){return new(i||l)};static \u0275cmp=y({type:l,selectors:[["app-modal-promotoras"]],inputs:{active:"active",Edicion:"Edicion",data:"data"},outputs:{onCloseModal:"onCloseModal"},decls:48,vars:11,consts:[[1,"modal",3,"ngClass"],[1,"modal-background"],[1,"modal-card"],[1,"modal-card-head"],[1,"modal-card-title"],["aria-label","close",1,"delete",3,"click"],[1,"modal-card-body"],[1,"field","is-grouped"],[1,"control"],["for","",1,"label"],["type","text",1,"input",3,"ngModelChange","ngModel"],[1,"control",2,"width","140px"],["type","email",1,"input",3,"ngModelChange","ngModel"],["type","number","name","","id","",1,"input",3,"ngModelChange","ngModel"],[1,"select"],[3,"ngModelChange","ngModel"],["value","Admin"],["value","Promotora"],["value","coordinadora"],[1,"button","is-primary"],[1,"button","is-primary",3,"click"],[1,"icon"]],template:function(i,e){i&1&&(t(0,"div",0),g(1,"div",1),t(2,"div",2)(3,"header",3)(4,"p",4),r(5,"Promotoras"),o(),t(6,"button",5),c("click",function(){return e.cerrar()}),o()(),t(7,"div",6)(8,"div",7)(9,"div",8)(10,"label",9),r(11,"Nombre:"),o(),t(12,"input",10),E("ngModelChange",function(a){return b(e.data.nombre,a)||(e.data.nombre=a),a}),o()(),t(13,"div",8)(14,"label",9),r(15,"Apellido:"),o(),t(16,"input",10),E("ngModelChange",function(a){return b(e.data.apellido,a)||(e.data.apellido=a),a}),o()()(),t(17,"div",7)(18,"div",11)(19,"label",9),r(20,"Tel\xE9fono:"),o(),t(21,"input",10),E("ngModelChange",function(a){return b(e.data.telefono,a)||(e.data.telefono=a),a}),o()(),t(22,"div",8)(23,"label",9),r(24,"Correo:"),o(),t(25,"input",12),E("ngModelChange",function(a){return b(e.data.correo,a)||(e.data.correo=a),a}),o()(),t(26,"div",11)(27,"label",9),r(28,"Regi\xF3n"),o(),t(29,"input",10),E("ngModelChange",function(a){return b(e.data.region,a)||(e.data.region=a),a}),o()()(),t(30,"div",7)(31,"div",8)(32,"label",9),r(33,"Sueldo (USD):"),o(),t(34,"input",13),E("ngModelChange",function(a){return b(e.data.sueldo,a)||(e.data.sueldo=a),a}),o()(),t(35,"div",8)(36,"label",9),r(37,"Role:"),o(),t(38,"div",14)(39,"select",15),E("ngModelChange",function(a){return b(e.data.role,a)||(e.data.role=a),a}),t(40,"option",16),r(41,"Administrador"),o(),t(42,"option",17),r(43,"Promotora"),o(),t(44,"option",18),r(45,"Coordinadora"),o()()()()(),S(46,de,4,0,"button",19)(47,se,4,0,"button",19),o()()()),i&2&&(_("ngClass",f(9,le,e.active)),d(12),h("ngModel",e.data.nombre),d(4),h("ngModel",e.data.apellido),d(5),h("ngModel",e.data.telefono),d(4),h("ngModel",e.data.correo),d(4),h("ngModel",e.data.region),d(5),h("ngModel",e.data.sueldo),d(5),h("ngModel",e.data.role),d(7),P(e.data.nombre&&e.data.apellido&&e.data.telefono&&e.data.correo&&e.data.region&&e.data.sueldo&&e.data.role&&!e.Edicion?46:e.data.nombre&&e.data.apellido&&e.data.telefono&&e.data.correo&&e.data.region&&e.data.sueldo&&e.data.role&&e.Edicion?47:-1))},dependencies:[F,k,Y,Q,X,H,J,K,z,G],encapsulation:2})};var x=ie(oe());var me=()=>[],v=l=>({inhabilitado:l});function ce(l,n){l&1&&(t(0,"thead")(1,"tr")(2,"th"),r(3,"Fija"),o(),t(4,"th"),r(5,"Nombre"),o(),t(6,"th"),r(7,"Correo"),o(),t(8,"th"),r(9,"Tel\xE9fono"),o(),t(10,"th"),r(11,"Regi\xF3n"),o(),t(12,"th"),r(13,"Sueldo (USD)"),o(),t(14,"th"),r(15,"Role"),o(),t(16,"th"),r(17,"Acci\xF3n"),o()()())}function pe(l,n){l&1&&g(0,"app-loadings")}function ue(l,n){l&1&&g(0,"i",12)}function _e(l,n){l&1&&g(0,"i",13)}function ge(l,n){if(l&1){let i=C();t(0,"i",16),c("click",function(){p(i);let s=m().$implicit,a=m(2);return u(a.inhabilitarPromotora(s,"inhabilitada"))}),o(),r(1,"\xA0 ")}}function Ce(l,n){if(l&1){let i=C();t(0,"i",17),c("click",function(){p(i);let s=m().$implicit,a=m(2);return u(a.inhabilitarPromotora(s,"habilitada"))}),o(),r(1,"\xA0 ")}}function fe(l,n){if(l&1){let i=C();t(0,"i",18),c("click",function(){p(i);let s=m().$implicit,a=m(2);return u(a.activarCalendario(s))}),o(),r(1,"\xA0 ")}}function Pe(l,n){if(l&1){let i=C();t(0,"i",19),c("click",function(){p(i);let s=m().$implicit,a=m(2);return u(a.activarCalendario(s))}),o(),r(1,"\xA0 ")}}function he(l,n){if(l&1){let i=C();t(0,"tr")(1,"td",11),S(2,ue,1,0,"i",12)(3,_e,1,0,"i",13),o(),t(4,"td",11),r(5),o(),t(6,"td",11),r(7),o(),t(8,"td",11),r(9),o(),t(10,"td",11),r(11),o(),t(12,"td",11),r(13),o(),t(14,"td",11),r(15),o(),t(16,"td")(17,"i",14),c("click",function(){let s=p(i).$implicit,a=m(2);return u(a.Editar(s))}),o(),r(18,"\xA0 "),t(19,"i",15),c("click",function(){let s=p(i).$implicit,a=m(2);return u(a.ElimiarPromotora(s))}),o(),r(20,"\xA0 "),S(21,ge,2,0)(22,Ce,2,0)(23,fe,2,0)(24,Pe,2,0),o()()}if(l&2){let i=n.$implicit;d(),_("ngClass",f(17,v,i.estado==="inhabilitada")),d(),P(i.fija?3:2),d(2),_("ngClass",f(19,v,i.estado==="inhabilitada")),d(),R("",i.nombre," ",i.apellido," "),d(),_("ngClass",f(21,v,i.estado==="inhabilitada")),d(),M(i.correo),d(),_("ngClass",f(23,v,i.estado==="inhabilitada")),d(),M(i.telefono),d(),_("ngClass",f(25,v,i.estado==="inhabilitada")),d(),M(i.region),d(),_("ngClass",f(27,v,i.estado==="inhabilitada")),d(),D("",i.sueldo," $"),d(),_("ngClass",f(29,v,i.estado==="inhabilitada")),d(),M(i.role),d(6),P(i.estado!="inhabilitada"?21:22),d(2),P(i.restringido?23:24)}}function be(l,n){l&1&&(t(0,"div",10),r(1," No se encontraron promotoras. "),o())}function Ee(l,n){if(l&1&&j(0,he,25,31,"tr",null,L,!1,be,2,0,"div",10),l&2){let i=m();q(i.paginatedPromotoras)}}function Se(l,n){if(l&1){let i=C();t(0,"li")(1,"a",20),c("click",function(){let s=p(i).$index,a=m();return u(a.goToPage(s+1))}),r(2),o()()}if(l&2){let i=n.$index,e=m();d(),T("is-current",e.currentPage===i+1),d(),D(" ",i+1," ")}}var ee=class l{UserService=w(V);Modal=U(!1);Edicion=U(!1);data={nombre:"",apellido:"",correo:"",telefono:"",region:"",sueldo:"",restringido:!0,fija:!0,role:"Promotora"};constructor(){}currentPage=1;itemsPerPage=10;get totalItems(){return this.UserService.users().length}get totalPages(){return Math.ceil(this.totalItems/this.itemsPerPage)}get paginatedPromotoras(){let n=(this.currentPage-1)*this.itemsPerPage,i=n+this.itemsPerPage;return this.UserService.users().slice(n,i)}goToPage(n){n<1||n>this.totalPages||(this.currentPage=n)}ManejoModal(){this.Modal.update(n=>!n)}cerrarEdicion(){this.Edicion.update(n=>!1),this.data={nombre:"",apellido:"",correo:"",telefono:"",region:"",sueldo:"",restringido:!0,fija:!0,role:"Promotora"}}Editar(n){this.data=n,this.Edicion.update(i=>!i),this.ManejoModal()}ElimiarPromotora(n){x.default.fire({title:`\xBFEliminar esta promotora: ${n.nombre} ${n.apellido}?`,text:"\xBFEstas segura que quieres eliminar a esta promotora? aun podras ver reportes anteriores pero no podra generar nuevos",icon:"question",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Eliminar!"}).then(i=>{i.isConfirmed&&(this.UserService.eliminarPromotora(n._id),x.default.fire({title:"Eliminada",text:"La promotora fue eliminada de la lista",icon:"success",showConfirmButton:!1,timer:5e3,toast:!0,timerProgressBar:!0,position:"top-end"}))})}inhabilitarPromotora(n,i){let e,s,a,I,W,N,A;i==="habilitada"?(e=`\xBFhabilitar esta promotora: ${n.nombre} ${n.apellido}?`,s="\xBFEstas segura que quieres habilitar a esta promotora?",a="Habilitada",I="La promotora ahora esta habilitada",W="Habilitar",N="#3085d6",A="#d33"):(e=`\xBFInhabilitar esta promotora: ${n.nombre} ${n.apellido}?`,s="\xBFEstas segura que quieres inhabilitar a esta promotora? aun podras ver reportes anteriores pero no podra generar nuevos",a="Inhabilitada",I="La promotora fue Inhabilitada de la lista",W="Inhabilitar",A="#3085d6",N="#d33"),x.default.fire({title:e,text:s,icon:"question",showCancelButton:!0,confirmButtonColor:N,cancelButtonColor:A,confirmButtonText:W}).then(te=>{te.isConfirmed&&(n.estado=i,this.UserService.EditarPromotora(n),x.default.fire({title:a,text:I,icon:"success",showConfirmButton:!1,timer:5e3,toast:!0,timerProgressBar:!0,position:"top-end"}))})}activarCalendario(n){n.restringido=!n.restringido,this.UserService.EditarPromotora(n)}static \u0275fac=function(i){return new(i||l)};static \u0275cmp=y({type:l,selectors:[["app-promotoras"]],decls:22,vars:12,consts:[[3,"onCloseModal","active","Edicion","data"],[1,"button","is-primary",3,"click"],[1,"icon"],[1,"fas","fa-plus-square"],[1,"table","is-striped","is-fullwidth"],["role","navigation","aria-label","pagination",1,"pagination"],[1,"pagination-previous",3,"click"],[1,"pagination-list"],[1,"pagination-next",3,"click"],[1,"pagination-info"],[1,"notification","is-primary","is-light"],[3,"ngClass"],[1,"fas","fa-ban",2,"color","rgb(228, 129, 129)"],[1,"fas","fa-check",2,"color","rgb(129, 228, 129)"],[1,"fas","fa-user-edit",2,"color","rgb(129, 228, 129)","cursor","pointer",3,"click"],[1,"fas","fa-user-minus",2,"color","rgb(228, 129, 129)","cursor","pointer",3,"click"],[1,"fas","fa-user-slash",2,"color","rgb(228, 177, 129)","cursor","pointer",3,"click"],[1,"fas","fa-user-check",2,"color","rgb(129, 228, 129)","cursor","pointer",3,"click"],[1,"fas","fa-calendar-check",2,"color","rgb(228, 129, 129)",3,"click"],[1,"fas","fa-calendar-check",2,"color","rgb(129, 228, 129)",3,"click"],[1,"pagination-link",3,"click"]],template:function(i,e){i&1&&(t(0,"app-modal-promotoras",0),c("onCloseModal",function(){return e.ManejoModal(),e.cerrarEdicion()}),o(),t(1,"button",1),c("click",function(){return e.ManejoModal()}),t(2,"span",2),g(3,"i",3),o(),t(4,"span"),r(5,"Nuevo"),o()(),g(6,"hr"),t(7,"table",4),S(8,ce,18,0,"thead"),t(9,"tbody"),S(10,pe,1,0,"app-loadings")(11,Ee,3,1),o()(),t(12,"nav",5)(13,"a",6),c("click",function(){return e.goToPage(e.currentPage-1)}),r(14," Anterior "),o(),t(15,"ul",7),j(16,Se,3,3,"li",null,L),o(),t(18,"a",8),c("click",function(){return e.goToPage(e.currentPage+1)}),r(19," Siguiente "),o()(),t(20,"div",9),r(21),o()),i&2&&(_("active",e.Modal())("Edicion",e.Edicion())("data",e.data),d(8),P(e.paginatedPromotoras.length>0?8:-1),d(2),P(e.UserService.loading()?10:11),d(3),T("is-disabled",e.currentPage===1),d(3),q($(11,me).constructor(e.totalPages)),d(2),T("is-disabled",e.currentPage===e.totalPages),d(3),R(" P\xE1gina ",e.currentPage," de ",e.totalPages,`
`))},dependencies:[Z,B,F,k],styles:[".inhabilitado[_ngcontent-%COMP%]{color:#c24040}"]})};export{ee as PromotorasComponent};
