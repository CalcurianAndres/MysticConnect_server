import{a as L}from"./chunk-7BL6ZFTP.js";import{a as k}from"./chunk-BKCD2X7C.js";import{a as $,b as O,c as z,i as y,j as J}from"./chunk-LFLLRPWB.js";import"./chunk-2T3NZPXG.js";import{$a as V,Fa as T,Ia as E,Na as v,Pb as R,Sb as q,Wa as h,X as g,Xa as M,Ya as f,Za as F,_a as I,ab as t,bb as n,cb as p,da as u,db as _,e as H,ea as C,eb as d,fb as m,hb as l,ib as S,ja as N,jb as W,kb as D,mb as b,nb as P,ob as x,qb as j,rb as A,za as r}from"./chunk-XBXOYP5X.js";var U=o=>({"is-active":o});function X(o,a){if(o&1){let i=_();t(0,"button",14),d("click",function(){u(i);let s=m();return C(s.nuevoCliente())}),p(1,"span",15),t(2,"span"),l(3,"Registrar"),n()()}}function Y(o,a){if(o&1){let i=_();t(0,"button",14),d("click",function(){u(i);let s=m();return C(s.EditarProducto())}),p(1,"span",15),t(2,"span"),l(3,"Editar"),n()()}}var w=class o{ClientService=g(k);active;Edicion;data;onCloseModal=new N;cerrar(){this.onCloseModal.emit()}nuevoCliente(){this.ClientService.NuevoCliente(this.data),this.cerrar()}EditarProducto(){this.ClientService.EditarClientes(this.data),this.cerrar()}static \u0275fac=function(i){return new(i||o)};static \u0275cmp=E({type:o,selectors:[["app-modal-clientes"]],inputs:{active:"active",Edicion:"Edicion",data:"data"},outputs:{onCloseModal:"onCloseModal"},decls:23,vars:7,consts:[[1,"modal",3,"ngClass"],[1,"modal-background"],[1,"modal-card"],[1,"modal-card-head"],[1,"modal-card-title"],["aria-label","close",1,"delete",3,"click"],[1,"modal-card-body"],[1,"field","is-grouped"],[1,"control"],["for","",1,"label"],["type","text",1,"input",3,"ngModelChange","ngModel"],[1,"field"],["name","","id","",1,"textarea",3,"ngModelChange","ngModel"],[1,"button","is-primary"],[1,"button","is-primary",3,"click"],[1,"icon"]],template:function(i,e){i&1&&(t(0,"div",0),p(1,"div",1),t(2,"div",2)(3,"header",3)(4,"p",4),l(5,"Clientes"),n(),t(6,"button",5),d("click",function(){return e.cerrar()}),n()(),t(7,"div",6)(8,"div",7)(9,"div",8)(10,"label",9),l(11,"Cliente:"),n(),t(12,"input",10),x("ngModelChange",function(c){return P(e.data.cliente,c)||(e.data.cliente=c),c}),n()(),t(13,"div",8)(14,"label",9),l(15,"Rif:"),n(),t(16,"input",10),x("ngModelChange",function(c){return P(e.data.rif,c)||(e.data.rif=c),c}),n()()(),t(17,"div",11)(18,"label",9),l(19,"Informaci\xF3n:"),n(),t(20,"textarea",12),x("ngModelChange",function(c){return P(e.data.informacion,c)||(e.data.informacion=c),c}),n()(),v(21,X,4,0,"button",13)(22,Y,4,0,"button",13),n()()()),i&2&&(h("ngClass",A(5,U,e.active)),r(12),b("ngModel",e.data.cliente),r(4),b("ngModel",e.data.rif),r(4),b("ngModel",e.data.informacion),r(),f(e.data.cliente&&e.data.rif&&e.data.informacion&&!e.Edicion?21:e.data.cliente&&e.data.rif&&e.data.informacion&&e.Edicion?22:-1))},dependencies:[q,R,y,$,O,z],encapsulation:2})};var B=H(J());var Z=()=>[];function ee(o,a){o&1&&(t(0,"thead")(1,"tr")(2,"th"),l(3,"Cliente"),n(),t(4,"th"),l(5,"Rif"),n(),t(6,"th"),l(7,"Informaci\xF3n"),n(),t(8,"th"),l(9,"Acci\xF3n"),n()()())}function te(o,a){o&1&&p(0,"app-loadings")}function ie(o,a){if(o&1){let i=_();t(0,"tr")(1,"td"),l(2),n(),t(3,"td"),l(4),n(),t(5,"td"),l(6),n(),t(7,"td")(8,"i",11),d("click",function(){let s=u(i).$implicit,c=m(2);return C(c.Editar(s))}),n(),l(9,"\xA0 "),t(10,"i",12),d("click",function(){let s=u(i).$implicit,c=m(2);return C(c.EliminarCliente(s))}),n()()()}if(o&2){let i=a.$implicit;r(2),S(i.cliente),r(2),S(i.rif),r(2),S(i.informacion)}}function ne(o,a){o&1&&(t(0,"div",10),l(1," No se encuentra ning\xFAn cliente. "),n())}function ae(o,a){if(o&1&&(t(0,"tbody"),I(1,ie,11,3,"tr",null,F,!1,ne,2,0,"div",10),n()),o&2){let i=m();r(),V(i.paginatedClientes)}}function oe(o,a){if(o&1){let i=_();t(0,"li")(1,"a",13),d("click",function(){let s=u(i).$index,c=m();return C(c.goToPage(s+1))}),l(2),n()()}if(o&2){let i=a.$index,e=m();r(),M("is-current",e.currentPage===i+1),r(),W(" ",i+1," ")}}var G=class o{clientService=g(k);Modal=T(!1);Edicion=T(!1);data={cliente:"",rif:"",informacion:""};currentPage=1;itemsPerPage=10;get totalItems(){return this.clientService.clientes().length}get totalPages(){return Math.ceil(this.totalItems/this.itemsPerPage)}get paginatedClientes(){let a=(this.currentPage-1)*this.itemsPerPage,i=a+this.itemsPerPage;return this.clientService.clientes().slice(a,i)}goToPage(a){a<1||a>this.totalPages||(this.currentPage=a)}ManejoModal(){this.Modal.update(a=>!a)}cerrarEdicion(){this.Edicion.update(a=>!1),this.data={cliente:"",rif:"",informacion:""}}EliminarCliente(a){B.default.fire({title:`\xBFEliminar este cliente ${a.cliente}?`,text:"\xBFEstas segura que quieres eliminar a este cliente? aun podras ver reportes anteriores y estad\xEDsticas con este cliente pero no podras reportar nuevas ventas de este cliente",icon:"question",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Eliminar!"}).then(i=>{i.isConfirmed&&(this.clientService.EliminarCliente(a._id),B.default.fire({title:"Eliminada",text:"El cliente fu\xE9 eliminado de la lista",icon:"success",showConfirmButton:!1,timer:5e3,toast:!0,timerProgressBar:!0,position:"top-end"}))})}Editar(a){this.data=a,this.Edicion.update(i=>!i),this.ManejoModal()}static \u0275fac=function(i){return new(i||o)};static \u0275cmp=E({type:o,selectors:[["app-clientes"]],decls:21,vars:12,consts:[[3,"onCloseModal","active","Edicion","data"],[1,"button","is-primary",3,"click"],[1,"icon"],[1,"fas","fa-plus-square"],[1,"table","is-fullwidth","is-striped"],["role","navigation","aria-label","pagination",1,"pagination"],[1,"pagination-previous",3,"click"],[1,"pagination-list"],[1,"pagination-next",3,"click"],[1,"pagination-info"],[1,"notification","is-primary","is-light"],[1,"fas","fa-user-edit",2,"color","rgb(129, 228, 129)","cursor","pointer",3,"click"],[1,"fas","fa-user-minus",2,"color","rgb(228, 129, 129)","cursor","pointer",3,"click"],[1,"pagination-link",3,"click"]],template:function(i,e){i&1&&(t(0,"app-modal-clientes",0),d("onCloseModal",function(){return e.ManejoModal(),e.cerrarEdicion()}),n(),t(1,"button",1),d("click",function(){return e.ManejoModal()}),t(2,"span",2),p(3,"i",3),n(),t(4,"span"),l(5,"Nuevo"),n()(),p(6,"hr"),t(7,"table",4),v(8,ee,10,0,"thead")(9,te,1,0,"app-loadings")(10,ae,4,1,"tbody"),n(),t(11,"nav",5)(12,"a",6),d("click",function(){return e.goToPage(e.currentPage-1)}),l(13," Anterior "),n(),t(14,"ul",7),I(15,oe,3,3,"li",null,F),n(),t(17,"a",8),d("click",function(){return e.goToPage(e.currentPage+1)}),l(18," Siguiente "),n()(),t(19,"div",9),l(20),n()),i&2&&(h("active",e.Modal())("Edicion",e.Edicion())("data",e.data),r(8),f(e.paginatedClientes.length>0?8:-1),r(),f(e.clientService.loading()?9:10),r(3),M("is-disabled",e.currentPage===1),r(3),V(j(11,Z).constructor(e.totalPages)),r(2),M("is-disabled",e.currentPage===e.totalPages),r(3),D(" P\xE1gina ",e.currentPage," de ",e.totalPages," "))},dependencies:[y,L,w],encapsulation:2})};export{G as ClientesComponent};
