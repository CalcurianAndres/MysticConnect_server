import{a as A}from"./chunk-47IIEXDC.js";import{a as Y}from"./chunk-NRLKYALS.js";import{a as Z}from"./chunk-UFKSQMJU.js";import{a as $}from"./chunk-N6MNTSAI.js";import{a as K}from"./chunk-5VHOJUVT.js";import"./chunk-RO3D7PJV.js";import{a as O,b as q,c as j,d as z,e as G,f as J,g as Q,h as H,i as U}from"./chunk-AEYFKSCU.js";import"./chunk-SJQBYHCF.js";import{$a as E,Fa as w,Ia as V,Na as x,Sb as D,Wa as y,Wb as N,X as S,Ya as f,Za as M,_a as R,ab as i,bb as n,cb as _,da as p,db as u,e as X,ea as m,eb as v,fb as s,gb as W,hb as c,ib as B,jb as I,kb as T,lb as F,nb as g,ob as C,pb as h,sb as k,tb as L,za as d}from"./chunk-K6DX3A3E.js";var b=X($());var ee=a=>({rotado:a}),te=(a,o)=>({oculto:a,activo:o});function ie(a,o){if(a&1&&(i(0,"option",23),c(1),n()),a&2){let e=o.$implicit;W("value",e._id),d(),B(e.cliente)}}function ne(a,o){if(a&1){let e=u();i(0,"div",7)(1,"label",16),c(2,"Establecimiento"),n(),i(3,"div",17)(4,"select",22),h("ngModelChange",function(t){p(e);let r=s();return C(r.establecimiento,t)||(r.establecimiento=t),m(t)}),R(5,ie,2,2,"option",23,M),n()()()}if(a&2){let e=s();d(4),g("ngModel",e.establecimiento),d(),E(e.ClientServices.ClientePorMarca(e.marca_seleccionada))}}function oe(a,o){if(a&1){let e=u();i(0,"div",7)(1,"label",16),c(2,"Motivo"),n(),i(3,"div",17)(4,"select",22),h("ngModelChange",function(t){p(e);let r=s();return C(r.establecimiento,t)||(r.establecimiento=t),m(t)}),i(5,"option",24),c(6,"Reposo Medico"),n(),i(7,"option",25),c(8,"Malestar"),n(),i(9,"option",26),c(10,"Asunto Personal"),n()()()()}if(a&2){let e=s();d(4),g("ngModel",e.establecimiento)}}function ae(a,o){if(a&1){let e=u();i(0,"div",9)(1,"div",2)(2,"div",6)(3,"div",7)(4,"input",30),h("ngModelChange",function(t){p(e);let r=s(2);return C(r.tipo_evento,t)||(r.tipo_evento=t),m(t)}),n(),c(5," Juega y Gana "),n(),i(6,"div",7)(7,"input",31),h("ngModelChange",function(t){p(e);let r=s(2);return C(r.tipo_evento,t)||(r.tipo_evento=t),m(t)}),n(),c(8," Color y estilo "),n()(),i(9,"div",6)(10,"div",7)(11,"input",32),h("ngModelChange",function(t){p(e);let r=s(2);return C(r.tipo_evento,t)||(r.tipo_evento=t),m(t)}),n(),c(12," Cabellos con estilo "),n(),i(13,"div",7)(14,"input",33),h("ngModelChange",function(t){p(e);let r=s(2);return C(r.tipo_evento,t)||(r.tipo_evento=t),m(t)}),n(),c(15," Dale y gana "),n()()()()}if(a&2){let e=s(2);d(4),g("ngModel",e.tipo_evento),d(3),g("ngModel",e.tipo_evento),d(4),g("ngModel",e.tipo_evento),d(3),g("ngModel",e.tipo_evento)}}function re(a,o){if(a&1){let e=u();i(0,"button",35),v("click",function(){p(e);let t=s(3);return m(t.NextStep())}),i(1,"span",36),_(2,"i",37),n(),i(3,"span"),c(4,"Continuar"),n()()}}function le(a,o){if(a&1){let e=u();i(0,"button",35),v("click",function(){p(e);let t=s(3);return m(t.NextStep())}),i(1,"span",36),_(2,"i",37),n(),i(3,"span"),c(4,"Continuar"),n()()}}function de(a,o){if(a&1&&x(0,re,5,0,"button",34)(1,le,5,0,"button",34),a&2){let e=s(2);f(e.tipo!="Evento"?0:e.tipo_evento?1:-1)}}function ce(a,o){if(a&1){let e=u();i(0,"div",6)(1,"div",7)(2,"label",27)(3,"input",28),h("ngModelChange",function(t){p(e);let r=s();return C(r.tipo,t)||(r.tipo=t),m(t)}),n(),c(4," Impulso "),n()(),i(5,"div",7)(6,"label",27)(7,"input",29),h("ngModelChange",function(t){p(e);let r=s();return C(r.tipo,t)||(r.tipo=t),m(t)}),n(),c(8," Evento "),n()()(),x(9,ae,16,4,"div",9)(10,de,2,1)}if(a&2){let e=s();d(3),g("ngModel",e.tipo),d(4),g("ngModel",e.tipo),d(2),f(e.tipo==="Evento"?9:-1),d(),f(e.establecimiento&&e.tipo&&e.marca_seleccionada?10:-1)}}function se(a,o){if(a&1){let e=u();i(0,"button",35),v("click",function(){p(e);let t=s(2);return m(t.reportarFalta())}),i(1,"span",36),_(2,"i",37),n(),i(3,"span"),c(4,"Reportar"),n()()}}function pe(a,o){if(a&1&&x(0,se,5,0,"button",34),a&2){let e=s();f(e.establecimiento?0:-1)}}function me(a,o){if(a&1){let e=u();i(0,"tr")(1,"td",43)(2,"button",44),v("click",function(){let t=p(e).$implicit,r=s(2);return m(r.agregarProducto(t._id))}),i(3,"span",36),_(4,"i",45),n()()(),i(5,"td"),c(6),n()()}if(a&2){let e=o.$implicit;d(6),T("",e.producto," (",e.linea,")")}}function _e(a,o){a&1&&(i(0,"thead")(1,"tr"),_(2,"th"),i(3,"th"),c(4,"Producto"),n(),i(5,"th"),c(6,"Vendido"),n()()())}function ue(a,o){if(a&1){let e=u();i(0,"tr")(1,"td",43)(2,"button",46),v("click",function(){let t=p(e).$index,r=s(2);return m(r.eliminarDeProductosSelected(t))}),i(3,"span",36),_(4,"i",47),n()()(),i(5,"td"),c(6),n(),i(7,"td",48)(8,"input",49),h("ngModelChange",function(t){let r=p(e).$implicit;return C(r.cantidad,t)||(r.cantidad=t),m(t)}),n()()()}if(a&2){let e=o.$implicit;d(6),F("",e.producto.marca," - ",e.producto.producto," (",e.producto.linea,")"),d(2),g("ngModel",e.cantidad)}}function ge(a,o){a&1&&(i(0,"div",42),c(1," Aun no haz indicado ningun producto para reportar su venta. "),n())}function Ce(a,o){if(a&1){let e=u();i(0,"div",38)(1,"div",7)(2,"textarea",50),h("ngModelChange",function(t){p(e);let r=s(2);return C(r.obervacion,t)||(r.obervacion=t),m(t)}),n()()()}if(a&2){let e=s(2);d(2),g("ngModel",e.obervacion)}}function he(a,o){if(a&1){let e=u();i(0,"button",35),v("click",function(){p(e);let t=s(2);return m(t.Reportar())}),i(1,"span",36),_(2,"i",51),n(),i(3,"span"),c(4,"Reportar"),n()()}}function fe(a,o){if(a&1){let e=u();i(0,"div",9)(1,"div",2)(2,"div",38)(3,"div",7)(4,"label",16),c(5,"Buscado de productos"),n(),i(6,"input",39),h("ngModelChange",function(t){p(e);let r=s();return C(r.searchTerm,t)||(r.searchTerm=t),m(t)}),v("input",function(){p(e);let t=s();return m(t.filterProductos())}),n()()(),_(7,"hr"),i(8,"table",40)(9,"thead"),R(10,me,7,2,"tr",null,M),n()(),i(12,"table",41),x(13,_e,7,0,"thead"),i(14,"tbody"),R(15,ue,9,4,"tr",null,M,!1,ge,2,0,"div",42),n()(),x(18,Ce,3,1,"div",38)(19,he,5,0,"button",34),n()()}if(a&2){let e=s();d(6),g("ngModel",e.searchTerm),d(4),E(e.filteredProductos),d(3),f(e.ProductosSelected.length>0?13:-1),d(2),E(e.ProductosSelected),d(3),f(e.ProductosSelected.length>0?18:-1),d(),f(e.ProductosSelected.length>0&&e.VerificarReporte()&&e.obervacion?19:-1)}}var P=class a{ClientServices=S(Z);ProductosServices=S(Y);ReportesServices=S(K);loginSevice=S(A);searchTerm="";filteredProductos=[];Informacion=w(!0);isRotated=w(!1);ProductosSelected=[];establecimiento="";tipo="";tipo_evento="";obervacion="";date_log="";CargadaInformacion=w(!1);data={promotora:this.loginSevice.usuario._id,cliente:"",productos:[],tipo:"",observacion:"",fecha:this.date_log};marca_seleccionada="";constructor(){this.date_log=this.getFormattedDate()}filterProductos(){this.searchTerm.trim()===""?this.filteredProductos=[]:this.filteredProductos=this.ProductosServices.productos().filter(o=>o.producto.toLowerCase().includes(this.searchTerm.toLowerCase())&&o.marca===this.marca_seleccionada)}getFormattedDate(){let o=new Date,e=String(o.getDate()).padStart(2,"0"),l=String(o.getMonth()+1).padStart(2,"0"),t=o.getFullYear(),r=o.getHours(),ve=String(o.getMinutes()).padStart(2,"0"),xe=String(o.getSeconds()).padStart(2,"0"),Se=r>=12?"PM":"AM";return r=r%12,r=r||12,`${t}-${l}-${e}`}toggleInformacion(){this.Informacion.update(o=>!o),this.isRotated.update(o=>!o)}agregarProducto(o){this.searchTerm="",this.filterProductos();let e=this.ProductosServices.productos().find(t=>t._id===o);if(!e){console.error("Producto no encontrado");return}this.ProductosSelected.some(t=>t.producto?._id===e._id)||this.ProductosSelected.push({producto:e,cantidad:0})}VerificarReporte(){return this.ProductosSelected.every(o=>o.cantidad>0)}eliminarDeProductosSelected(o){this.ProductosSelected.splice(o,1)}Reportar(){b.default.fire({title:"\xBFReportar ventas de hoy?",text:"Recuerda verificar bien las cantidades que declaras y los productos seleccionados",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Reportar!"}).then(o=>{o.isConfirmed&&(b.default.fire({title:"Listo",text:"La informaci\xF3n fue enviada con exito",icon:"success",showConfirmButton:!1,timer:5e3,toast:!0,timerProgressBar:!0,position:"top-end"}),this.data.cliente=this.establecimiento,this.data.tipo=this.tipo,this.data.evento=this.tipo_evento,this.data.productos=this.ProductosSelected.map(e=>({producto:e.producto._id,cantidad:e.cantidad})),this.data.observacion=this.obervacion,this.data.fecha=this.date_log,this.ReportesServices.NuevoReporte(this.data),this.data={promotora:this.loginSevice.usuario._id,cliente:"",productos:[],tipo:"",observacion:"",fecha:this.date_log},this.ProductosSelected=[],this.establecimiento="",this.tipo="",this.tipo_evento="",this.obervacion="",this.CargadaInformacion.update(e=>!1),this.isRotated.update(e=>!1),this.Informacion.update(e=>!0))})}reportarFalta(){b.default.fire({title:"\xBFReportar falta el dia de hoy?",text:"No generaras puntos ni ventas el dia de hoy",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Reportar!"}).then(o=>{o.isConfirmed&&(b.default.fire({title:"Listo",text:"La informaci\xF3n fue enviada con exito",icon:"success",showConfirmButton:!1,timer:5e3,toast:!0,timerProgressBar:!0,position:"top-end"}),this.data.cliente="6756ef7ed60449fa9c3ee3fa",this.data.tipo=this.establecimiento,this.data.evento=this.tipo_evento,this.data.productos=[],this.data.observacion="Promotora reporto falta justificada por lo que no pudo realizar ventas hoy",this.data.fecha=this.date_log,this.ReportesServices.NuevoReporte(this.data),this.data={promotora:this.loginSevice.usuario._id,cliente:"",productos:[],tipo:"",observacion:"",fecha:this.date_log},this.ProductosSelected=[],this.establecimiento="",this.tipo="",this.tipo_evento="",this.obervacion="",this.CargadaInformacion.update(e=>!1),this.isRotated.update(e=>!1),this.Informacion.update(e=>!0))})}NextStep(){this.CargadaInformacion.update(o=>!0),this.isRotated.update(o=>!0),this.Informacion.update(o=>!1)}verFormato(o){console.log(o.value)}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=V({type:a,selectors:[["app-reporte"]],decls:40,vars:17,consts:[[1,"formulario_envio_informacion"],[1,"card",2,"background-color","#34495E","color","rgb(212, 212, 212)"],[1,"card-content"],[1,"title",2,"color","rgb(212, 212, 212)"],[2,"font-weight","bold"],[1,"subtitle",2,"color","rgb(212, 212, 212)"],[1,"field","is-grouped"],[1,"control"],["type","date",1,"input",3,"change","value","max","disabled"],[1,"card"],[1,"card-header"],[1,"card-header-title"],["aria-label","more options",1,"card-header-icon"],[1,"icon",3,"click","ngClass"],["aria-hidden","true",1,"fas","fa-angle-up"],[1,"card-content",3,"ngClass"],["for","",1,"label"],[1,"select"],[3,"ngModelChange","change","ngModel"],["value","Mystic"],["value","Qerametik"],["value","Falta"],[3,"ngModelChange","ngModel"],[3,"value"],["value","Reposo"],["value","Malestar"],["value","Asunto personal"],[1,"radio"],["type","radio","name","evento","value","Impulso",3,"ngModelChange","ngModel"],["type","radio","name","evento","value","Evento",3,"ngModelChange","ngModel"],["type","radio","name","Tipo_evento","value","Juega y Gana",3,"ngModelChange","ngModel"],["type","radio","name","Tipo_evento","value","Color y estilo",3,"ngModelChange","ngModel"],["type","radio","name","Tipo_evento","value","Cabellos con estilo",3,"ngModelChange","ngModel"],["type","radio","name","Tipo_evento","value","Dale y gana",3,"ngModelChange","ngModel"],[1,"button","is-primary"],[1,"button","is-primary",3,"click"],[1,"icon"],[1,"fas","fa-long-arrow-alt-right"],[1,"field"],["type","text","placeholder","Buscar producto",1,"input",3,"ngModelChange","input","ngModel"],[1,"table","is-fullwidth","is-hoverable","is-striped"],[1,"table","is-fullwidth","is-striped"],[1,"notification","is-primary","is-light"],[2,"width","15px"],[1,"button","is-success","is-small","is-outlined",2,"border","none",3,"click"],[1,"fas","fa-plus-square"],[1,"button","is-danger","is-small","is-outlined",2,"border","none",3,"click"],[1,"fas","fa-trash-alt"],[2,"width","30px"],["type","number","placeholde","Cantidad vendida",1,"input",3,"ngModelChange","ngModel"],["placeholder","Observaci\xF3n",1,"textarea",3,"ngModelChange","ngModel"],[1,"fas","fa-check"]],template:function(e,l){e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),c(4),n(),_(5,"br"),i(6,"b",4),c(7,"Zona: "),n(),c(8),_(9,"br"),i(10,"span",5)(11,"div",6)(12,"div",7)(13,"input",8),v("change",function(r){return l.verFormato(r.target)}),n()()()()()(),_(14,"hr"),i(15,"div",9)(16,"header",10)(17,"p",11),c(18,"Informaci\xF3n del reporte"),n(),i(19,"button",12)(20,"span",13),v("click",function(){return l.toggleInformacion()}),_(21,"i",14),n()()(),i(22,"div",15)(23,"div",6)(24,"div",7)(25,"label",16),c(26,"Marca"),n(),i(27,"div",17)(28,"select",18),h("ngModelChange",function(r){return C(l.marca_seleccionada,r)||(l.marca_seleccionada=r),r}),v("change",function(){return l.establecimiento=""}),i(29,"option",19),c(30,"Mystic"),n(),i(31,"option",20),c(32,"Qerametik"),n(),i(33,"option",21),c(34,"Falta"),n()()()(),x(35,ne,7,1,"div",7)(36,oe,11,1,"div",7),n(),x(37,ce,11,4)(38,pe,1,1),n()(),x(39,fe,20,5,"div",9),n()),e&2&&(d(4),T(" ",l.loginSevice.usuario.nombre," ",l.loginSevice.usuario.apellido," "),d(4),I("",l.loginSevice.usuario.region," "),d(5),y("value",l.date_log)("max",l.date_log)("disabled",l.loginSevice.usuario.restringido),d(7),y("ngClass",k(12,ee,l.isRotated())),d(2),y("ngClass",L(14,te,!l.Informacion(),l.Informacion())),d(6),g("ngModel",l.marca_seleccionada),d(7),f(l.marca_seleccionada&&l.marca_seleccionada!="Falta"?35:l.marca_seleccionada&&l.marca_seleccionada==="Falta"?36:-1),d(2),f(l.marca_seleccionada!="Falta"?37:38),d(2),f(l.CargadaInformacion()?39:-1))},dependencies:[N,D,U,Q,H,O,z,J,G,q,j],styles:['@charset "UTF-8";.oculto[_ngcontent-%COMP%]{overflow:hidden;max-height:0px;padding:0;margin:0;transition:max-height .9s ease-out,padding .9s ease-out,margin 1s ease-out}.activo[_ngcontent-%COMP%]{overflow:hidden;max-height:1000px;transition:max-height .9s ease-out,padding .3s ease-out,margin .3s ease-out}.icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transition:transform .3s ease}.icon.rotado[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transform:rotate(180deg)}']})};export{P as default};
