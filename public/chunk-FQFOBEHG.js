import{a as q}from"./chunk-7BL6ZFTP.js";import{a as x}from"./chunk-RAVGZU5A.js";import{a as O,b as Q,c as U,d as z,f as G,g as H,h as J,i as w,j as Y}from"./chunk-LFLLRPWB.js";import"./chunk-2T3NZPXG.js";import{$a as W,Fa as k,Ia as M,Na as h,Pb as j,Sb as R,Wa as b,X as v,Xa as y,Ya as E,Za as V,_a as I,ab as t,bb as i,cb as m,da as p,db as g,e as X,ea as _,eb as s,fb as u,hb as n,ib as S,ja as N,jb as F,kb as D,mb as C,nb as f,ob as P,qb as L,rb as A,za as d}from"./chunk-XBXOYP5X.js";var ee=r=>({"is-active":r});function te(r,a){if(r&1){let o=g();t(0,"button",19),s("click",function(){p(o);let c=u();return _(c.nuevoProducto())}),m(1,"span",20),t(2,"span"),n(3,"Registrar"),i()()}}function ie(r,a){if(r&1){let o=g();t(0,"button",19),s("click",function(){p(o);let c=u();return _(c.EditarProducto())}),m(1,"span",20),t(2,"span"),n(3,"Editar"),i()()}}var T=class r{ProductoService=v(x);active;Edicion;data;onCloseModal=new N;cerrar(){this.onCloseModal.emit()}nuevoProducto(){this.ProductoService.NuevoProducto(this.data),this.cerrar()}EditarProducto(){this.ProductoService.EditarPromotora(this.data),this.cerrar()}static \u0275fac=function(o){return new(o||r)};static \u0275cmp=M({type:r,selectors:[["app-modal-productos"]],inputs:{active:"active",Edicion:"Edicion",data:"data"},outputs:{onCloseModal:"onCloseModal"},decls:43,vars:9,consts:[[1,"modal",3,"ngClass"],[1,"modal-background"],[1,"modal-card"],[1,"modal-card-head"],[1,"modal-card-title"],["aria-label","close",1,"delete",3,"click"],[1,"modal-card-body"],[1,"field","is-grouped"],[1,"control"],["for","",1,"label"],[1,"select"],[3,"ngModelChange","ngModel"],["value","Tradicional"],["value","Rebranding"],["value","Mystic"],["value","Qerametik"],["type","text",1,"input",3,"ngModelChange","ngModel"],["type","number",1,"input",3,"ngModelChange","ngModel"],[1,"button","is-primary"],[1,"button","is-primary",3,"click"],[1,"icon"]],template:function(o,e){o&1&&(t(0,"div",0),m(1,"div",1),t(2,"div",2)(3,"header",3)(4,"p",4),n(5,"Productos"),i(),t(6,"button",5),s("click",function(){return e.cerrar()}),i()(),t(7,"div",6)(8,"div",7)(9,"div",8)(10,"label",9),n(11,"Linea"),i(),t(12,"div",10)(13,"select",11),P("ngModelChange",function(l){return f(e.data.linea,l)||(e.data.linea=l),l}),t(14,"option",12),n(15,"Tradicional"),i(),t(16,"option",13),n(17,"Rebranding"),i()()()(),t(18,"div",8)(19,"label",9),n(20,"Marca"),i(),t(21,"div",10)(22,"select",11),P("ngModelChange",function(l){return f(e.data.marca,l)||(e.data.marca=l),l}),t(23,"option",14),n(24,"Mystic"),i(),t(25,"option",15),n(26,"Qerametik"),i()()()()(),t(27,"div",7)(28,"div",8)(29,"label",9),n(30,"Producto"),i(),t(31,"input",16),P("ngModelChange",function(l){return f(e.data.producto,l)||(e.data.producto=l),l}),i()()(),t(32,"div",7)(33,"div",8)(34,"label",9),n(35,"Puntos"),i(),t(36,"input",17),P("ngModelChange",function(l){return f(e.data.puntos,l)||(e.data.puntos=l),l}),i()(),t(37,"div",8)(38,"label",9),n(39,"Precio (USD)"),i(),t(40,"input",17),P("ngModelChange",function(l){return f(e.data.precio,l)||(e.data.precio=l),l}),i()()(),h(41,te,4,0,"button",18)(42,ie,4,0,"button",18),i()()()),o&2&&(b("ngClass",A(7,ee,e.active)),d(13),C("ngModel",e.data.linea),d(9),C("ngModel",e.data.marca),d(9),C("ngModel",e.data.producto),d(5),C("ngModel",e.data.puntos),d(4),C("ngModel",e.data.precio),d(),E(e.data.linea&&e.data.marca&&e.data.producto&&e.data.puntos&&e.data.precio&&!e.Edicion?41:e.data.linea&&e.data.marca&&e.data.producto&&e.data.puntos&&e.data.precio&&e.Edicion?42:-1))},dependencies:[R,j,w,H,J,O,z,G,Q,U],encapsulation:2})};var B=X(Y());var oe=()=>[];function ne(r,a){r&1&&(t(0,"thead")(1,"tr")(2,"th"),n(3,"Linea"),i(),t(4,"th"),n(5,"Marca"),i(),t(6,"th"),n(7,"Producto"),i(),t(8,"th"),n(9,"Puntos"),i(),t(10,"th"),n(11,"Precio (USD)"),i(),t(12,"th"),n(13,"Acci\xF3n"),i()()())}function ae(r,a){r&1&&m(0,"app-loadings")}function re(r,a){if(r&1){let o=g();t(0,"tr")(1,"td"),n(2),i(),t(3,"td"),n(4),i(),t(5,"td"),n(6),i(),t(7,"td"),n(8),i(),t(9,"td"),n(10),i(),t(11,"td")(12,"i",11),s("click",function(){let c=p(o).$implicit,l=u(2);return _(l.Editar(c))}),i(),n(13,"\xA0 "),t(14,"i",12),s("click",function(){let c=p(o).$implicit,l=u(2);return _(l.EliminarProducto(c))}),i()()()}if(r&2){let o=a.$implicit;d(2),S(o.linea),d(2),S(o.marca),d(2),S(o.producto),d(2),S(o.puntos),d(2),F("",o.precio," $")}}function le(r,a){r&1&&(t(0,"div",10),n(1," No se encuentra ning\xFAn producto. "),i())}function de(r,a){if(r&1&&(t(0,"tbody"),I(1,re,15,5,"tr",null,V,!1,le,2,0,"div",10),i()),r&2){let o=u();d(),W(o.productosServices.productos())}}function ce(r,a){if(r&1){let o=g();t(0,"li")(1,"a",13),s("click",function(){let c=p(o).$index,l=u();return _(l.goToPage(c+1))}),n(2),i()()}if(r&2){let o=a.$index,e=u();d(),y("is-current",e.currentPage===o+1),d(),F(" ",o+1," ")}}var K=class r{productosServices=v(x);Modal=k(!1);Edicion=k(!1);data={linea:"",marca:"",producto:"",puntos:0,precio:0};currentPage=1;itemsPerPage=10;get totalItems(){return this.productosServices.productos().length}get totalPages(){return Math.ceil(this.totalItems/this.itemsPerPage)}get paginatedProductos(){let a=(this.currentPage-1)*this.itemsPerPage,o=a+this.itemsPerPage;return this.productosServices.productos().slice(a,o)}goToPage(a){a<1||a>this.totalPages||(this.currentPage=a)}ManejoModal(){this.Modal.update(a=>!a)}cerrarEdicion(){this.Edicion.update(a=>!1),this.data={linea:"",marca:"",producto:"",puntos:0,precio:0}}Editar(a){this.data=a,this.Edicion.update(o=>!o),this.ManejoModal()}EliminarProducto(a){B.default.fire({title:`\xBFEliminar este producto ${a.producto}?`,text:"\xBFEstas segura que quieres eliminar a este producto? aun podras ver reportes anteriores y estad\xEDsticas con este producto pero no podras reportar nuevas ventas de este producto",icon:"question",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Eliminar!"}).then(o=>{o.isConfirmed&&(this.productosServices.EliminarProducto(a._id),B.default.fire({title:"Eliminada",text:"El producto fu\xE9 eliminado de la lista",icon:"success",showConfirmButton:!1,timer:5e3,toast:!0,timerProgressBar:!0,position:"top-end"}))})}static \u0275fac=function(o){return new(o||r)};static \u0275cmp=M({type:r,selectors:[["app-productos"]],decls:21,vars:12,consts:[[3,"onCloseModal","active","Edicion","data"],[1,"button","is-primary",3,"click"],[1,"icon"],[1,"fas","fa-plus-square"],[1,"table","is-fullwidth","is-striped"],["role","navigation","aria-label","pagination",1,"pagination"],[1,"pagination-previous",3,"click"],[1,"pagination-list"],[1,"pagination-next",3,"click"],[1,"pagination-info"],[1,"notification","is-primary","is-light"],[1,"fas","fa-edit",2,"color","rgb(129, 228, 129)","cursor","pointer",3,"click"],[1,"fas","fa-trash-alt",2,"color","rgb(228, 129, 129)","cursor","pointer",3,"click"],[1,"pagination-link",3,"click"]],template:function(o,e){o&1&&(t(0,"app-modal-productos",0),s("onCloseModal",function(){return e.ManejoModal(),e.cerrarEdicion()}),i(),t(1,"button",1),s("click",function(){return e.ManejoModal()}),t(2,"span",2),m(3,"i",3),i(),t(4,"span"),n(5,"Nuevo"),i()(),m(6,"hr"),t(7,"table",4),h(8,ne,14,0,"thead")(9,ae,1,0,"app-loadings")(10,de,4,1,"tbody"),i(),t(11,"nav",5)(12,"a",6),s("click",function(){return e.goToPage(e.currentPage-1)}),n(13," Anterior "),i(),t(14,"ul",7),I(15,ce,3,3,"li",null,V),i(),t(17,"a",8),s("click",function(){return e.goToPage(e.currentPage+1)}),n(18," Siguiente "),i()(),t(19,"div",9),n(20),i()),o&2&&(b("active",e.Modal())("Edicion",e.Edicion())("data",e.data),d(8),E(e.paginatedProductos.length>0?8:-1),d(),E(e.productosServices.loading()?9:10),d(3),y("is-disabled",e.currentPage===1),d(3),W(L(11,oe).constructor(e.totalPages)),d(2),y("is-disabled",e.currentPage===e.totalPages),d(3),D(" P\xE1gina ",e.currentPage," de ",e.totalPages," "))},dependencies:[w,T,q],encapsulation:2})};export{K as ProductosComponent};
